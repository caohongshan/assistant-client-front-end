(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["uni_modules/tian-mall/components/tian-pages/tian-pages"],{"24e0":function(n,t,e){"use strict";(function(n,i){var o=e("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(e("2eee")),c=o(e("9523")),s=o(e("c973"));function r(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,i)}return e}function l(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?r(Object(e),!0).forEach((function(t){(0,c.default)(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):r(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}var u=n.database(),d={data:function(){return{goods:{},pageStyle:"",dataList:[],options:{}}},provide:function(){return{tianPage:this}},props:{configs:{type:Object,default:function(){return{}}},styles:{type:Object,default:function(){return{}}},items:{type:Array,default:function(){}},refresh:{type:Number,default:0},loadmore:{type:Number,default:0},preview:{type:Boolean,default:!1}},computed:{hasGoodsModule:function(){return!!this.dataList&&this.dataList.filter((function(n){return-1!=n.component.indexOf("goods")})).length>0},bgClassName:function(){if(this.options){var n=[];return this.options.bgClassName&&n.push(this.options.bgClassName),this.options.isImmersive&&n.push("immersive"),console.log("bgClassName",n),n.join(" ")}return""}},watch:{configs:function(n){this.buildPage(),n.children?this.preview?(console.log("page 重新加载"),this.dataList=[],setTimeout((function(){}),120),this.dataList=n.children):this.dataList=n.children:n.parent_id!=this.configs.parent_id&&this.loadData(),console.log("page newVal",n)},loadmore:function(){console.log("pages loadmore")},refresh:function(){console.log("pages refresh"),this.loadPage()}},created:function(){this.loadPage()},mounted:function(){this.loaded=!0},methods:{hidden:function(){this.dataList=[]},loadPage:function(){var n=this;return(0,s.default)(a.default.mark((function t(){return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.buildPage();case 2:n.configs.children?n.dataList=n.checkData(n.configs.children):n.loadData();case 3:case"end":return t.stop()}}),t)})))()},clickPreview:function(n){this.$emit("click",n)},delItem:function(n,t){this.$emit("deletes",n,t)},buildPage:function(){var n=this;return(0,s.default)(a.default.mark((function t(){var e,o,c,s,r;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=Object.assign({},l(l(l({},n.configs),n.configs.configs),{},{configs:void 0,children:void 0})),o=n.configs._id?n.configs._id:n.configs.parent_id,n.configs.configs){t.next=9;break}return t.next=5,u.collection("tian-pages").doc(o).field("title,configs,city").get({getOne:!0});case 5:c=t.sent,s=c.result,console.log(s),s.data&&Object.assign(e,l(l({},s.data),s.data.configs));case 9:console.log("buildPage page config",e),e.title&&i.setNavigationBarTitle({title:e.title}),e.topbarColor&&e.topbarBgColor?i.setNavigationBarColor({backgroundColor:e.topbarBgColor,frontColor:e.topbarColor}):i.setNavigationBarColor({backgroundColor:"#ffffff",frontColor:"#000000"}),n.pageStyle="",e.backgroundImg&&(n.pageStyle="background-image:url(".concat(e.backgroundImg,") ;background-repeat:no-repeat;background-size: 100%;")),e.isImmersive&&(r=n.systemInfo.custom.top,n.pageStyle+="padding-top:".concat(r,"px;")),n.options=e,console.log("this.pageStyle",n.pageStyle);case 17:case"end":return t.stop()}}),t)})))()},loadData:function(){var n=this;u.collection("tian-pages").where("state==1").orderBy("posid asc").get({getTree:{limitLevel:10,startWith:'parent_id=="'.concat(this.configs.parent_id,'"')}}).then((function(t){var e=t.result;n.dataList=n.checkData(e.data)}))},checkData:function(n){var t=this;return n||(n=[]),n.forEach((function(n){t.configs.city&&(n.configs.city=t.configs.city,n.configs.condition&&(n.configs.condition+=' && city_ids=="'.concat(t.configs.city,'"')),n.city=t.configs.city),t.configs.shop_id&&(n.configs.condition&&(n.configs.condition+=' && shop_id=="'.concat(t.configs.shop_id,'"')),n.shop_id=t.configs.shop_id),n.children&&t.checkData(n.children)})),n},openSku:function(n){console.log("openSku",n),this.goods=n,this.$refs.tianSkuPop.open()}}};t.default=d}).call(this,e("a9ff")["default"],e("543d")["default"])},"95a4":function(n,t,e){},"9e40":function(n,t,e){"use strict";e.d(t,"b",(function(){return o})),e.d(t,"c",(function(){return a})),e.d(t,"a",(function(){return i}));var i={tianBanner:function(){return e.e("uni_modules/tian-mall/components/tian-banner/tian-banner").then(e.bind(null,"27e3"))},tianMapLocation:function(){return e.e("uni_modules/tian-mall/components/tian-map-location/tian-map-location").then(e.bind(null,"620d"))},tianGrides:function(){return e.e("uni_modules/tian-mall/components/tian-grides/tian-grides").then(e.bind(null,"fa05"))},tianSearchBar:function(){return e.e("uni_modules/tian-mall/components/tian-search-bar/tian-search-bar").then(e.bind(null,"9d9e"))},tianArticle:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/tian-article/components/tian-article/tian-article")]).then(e.bind(null,"642c"))},tianTitle:function(){return e.e("uni_modules/tian-mall/components/tian-title/tian-title").then(e.bind(null,"7def"))},tianBannerImage:function(){return e.e("uni_modules/tian-mall/components/tian-banner-image/tian-banner-image").then(e.bind(null,"b957"))},tianGoodsList:function(){return e.e("uni_modules/tian-mall/components/tian-goods-list/tian-goods-list").then(e.bind(null,"8d33"))},tianGoodsLayout:function(){return e.e("uni_modules/tian-mall/components/tian-goods-layout/tian-goods-layout").then(e.bind(null,"a958"))},tianGoodsJoinList:function(){return e.e("uni_modules/tian-mall/components/tian-goods-join-list/tian-goods-join-list").then(e.bind(null,"f19c"))},uniIcons:function(){return Promise.all([e.e("common/vendor"),e.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(e.bind(null,"06f3"))},tianGoodsSku:function(){return e.e("uni_modules/tian-mall/components/tian-goods-sku/tian-goods-sku").then(e.bind(null,"b631"))}},o=function(){var n=this.$createElement;this._self._c},a=[]},ca48:function(n,t,e){"use strict";var i=e("95a4"),o=e.n(i);o.a},d9c1:function(n,t,e){"use strict";e.r(t);var i=e("24e0"),o=e.n(i);for(var a in i)["default"].indexOf(a)<0&&function(n){e.d(t,n,(function(){return i[n]}))}(a);t["default"]=o.a},dc5d:function(n,t,e){"use strict";e.r(t);var i=e("9e40"),o=e("d9c1");for(var a in o)["default"].indexOf(a)<0&&function(n){e.d(t,n,(function(){return o[n]}))}(a);e("ca48");var c=e("f0c5"),s=Object(c["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);t["default"]=s.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'uni_modules/tian-mall/components/tian-pages/tian-pages-create-component',
    {
        'uni_modules/tian-mall/components/tian-pages/tian-pages-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("dc5d"))
        })
    },
    [['uni_modules/tian-mall/components/tian-pages/tian-pages-create-component']]
]);
