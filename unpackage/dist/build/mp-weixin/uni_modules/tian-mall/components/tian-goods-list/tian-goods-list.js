(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["uni_modules/tian-mall/components/tian-goods-list/tian-goods-list"],{"5d92":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var o={tianTitle:function(){return n.e("uni_modules/tian-mall/components/tian-title/tian-title").then(n.bind(null,"7def"))},tianGoodsImageCover:function(){return n.e("uni_modules/tian-mall/components/tian-goods-image-cover/tian-goods-image-cover").then(n.bind(null,"607a"))},tianGoodsPrice:function(){return n.e("uni_modules/tian-mall/components/tian-goods-price/tian-goods-price").then(n.bind(null,"720f"))},tianEmpty:function(){return n.e("uni_modules/tian-mall/components/tian-empty/tian-empty").then(n.bind(null,"2fd8"))},uniLoadMore:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-load-more/components/uni-load-more/uni-load-more")]).then(n.bind(null,"345c"))},tianGoodsSku:function(){return n.e("uni_modules/tian-mall/components/tian-goods-sku/tian-goods-sku").then(n.bind(null,"b631"))}},i=function(){var t=this.$createElement,e=(this._self._c,!this.loading&&0==this.dataList.length);this.$mp.data=Object.assign({},{$root:{g0:e}})},a=[]},7894:function(t,e,n){},"8d33":function(t,e,n){"use strict";n.r(e);var o=n("5d92"),i=n("a2b5");for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("8e94");var s=n("f0c5"),r=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);e["default"]=r.exports},"8e94":function(t,e,n){"use strict";var o=n("7894"),i=n.n(o);i.a},a2b5:function(t,e,n){"use strict";n.r(e);var o=n("c785"),i=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},c785:function(t,e,n){"use strict";var o=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("278c")),a=o(n("9523")),s=o(n("7037"));function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){(0,a.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l={data:function(){return{isItemClick:!1,bgStyle:"",page_no:0,loading:!0,hasMore:!0,goods:{},dataList:[]}},props:{configs:{type:Object,default:function(){return{condition:"",checkLocation:!0,loadmore:!1,loading:!1,withTitle:!1,headerUnderLine:!1,hasCart:!0,headerTitle:"",waterfall:!1,bgClassName:"none",itemClassName:"none",imageClassName:"none",style:"",image_size:"260x260",page_size:20,scrollY:!1,showMiaosha:!1}}},condition:{type:[String,Object],default:""},withSku:{type:Boolean,default:!0},refresh:{type:Number,default:0},loadmore:{type:Number,default:0},detailUrl:{type:String,default:"/pages/product/detail"}},computed:{where:function(){var t=["is_on_sale==true"];if(this.configs&&this.configs.condition&&t.push("(".concat(this.configs.condition,")")),console.log("where computed"),this.condition){if("object"==(0,s.default)(this.condition))return c(c({},this.condition),{},{is_on_sale:!0});t.push("(".concat(this.condition,")"))}return t.join(" && ")},options:function(){return c({},this.configs)},orderby:function(){return this.configs&&this.configs.order?this.configs.order:"last_modify_date desc"}},watch:{loadmore:function(){this.scrolltolower()},configs:function(t){},condition:function(t){this.page_no=0,this.loadMoreData(),console.log("重新加载商品列表数据")}},created:function(){this.loadMoreData()},methods:{bgClick:function(){!this.isItemClick&&this.configs.top_url&&(console.log("bg click"),this.navTo(this.configs.top_url))},loadData:function(t,e,n){var o=this;console.log("goods list",t,e,n),t.forEach((function(t,e){t.style="",t.hasCart=o.configs.hasCart&&!!t.is_real,t.hasSaleCount=!1;var a=o.configs.image_size||"260x260";if(o.configs.waterfall&&e/2<2&&e%2==0&&1==n.current){var s=a.split("x"),r=(0,i.default)(s,2),c=r[0],l=r[1];a=[c,1*l+40].join("x")}if(t.banner_path=o.$thumbImg(t.goods_thumb,a),"style-big-image"==o.configs.style){if(t.goods_banner&&t.goods_banner.path){var u=t.goods_banner;if(a){var d=a.split("x"),h=(0,i.default)(d,1),g=h[0],f=parseInt(u.image.height*g/u.image.width);t.style="width:".concat(g,"rpx;height:").concat(f,"rpx;"),t.banner_path=o.$thumbImg(u.path,"".concat(g,"x").concat(f))}else t.banner_path=u.path,t.style="width:".concat(u.image.width,"rpx;height:").concat(u.image.height,"rpx;")}t.is_real||(t.hasSaleCount=!0)}else{var p=a.split("x"),m=(0,i.default)(p,2),b=m[0],_=m[1];t.style="width:".concat(b,"rpx;height:").concat(_,"rpx;"),t.name=t.name?t.name.substr(0,30):""}t.imageSize=a})),this.configs.background_img&&(this.bgStyle="background-image:url(".concat(this.configs.background_img,") ; background-repeat: no-repeat;    background-size: 100%;")),1==n.current&&(this.dataList=[]),this.dataList=this.dataList.concat(t)},scrolltolower:function(){console.log("goods scrolltolower"),this.configs.loadmore&&this.loadMoreData()},loadMoreData:function(){var t=this;this.page_no++;var e=this.configs.page_size?this.configs.page_size:20;this.loading=!0,console.log("goods loadmore");var n=this.where.split(" && ");console.log("whereArr==",n),this.$request("mall/goods/goodsList",{where:{is_on_sale:"true"==n[0].split("==")[1]},orderby:this.orderby,page_no:this.page_no,page_size:e}).then((function(n){console.log(n),t.loadData(n,n.length!=e,{current:t.page_no,size:e}),t.loading=!1,t.hasMore=n.length==e}))},navToDetail:function(t){var e=this.dataList[t];this.navTo(this.detailUrl+"?id="+e._id,e)},openSku:function(t){var e=this,n=this.dataList[t];return this.withSku?(this.goods=n,this.$refs.tianSkuPop.open()):this.$emit("click",n),this.isItemClick=!0,setTimeout((function(){e.isItemClick=!1}),2e3),!1}}};e.default=l}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'uni_modules/tian-mall/components/tian-goods-list/tian-goods-list-create-component',
    {
        'uni_modules/tian-mall/components/tian-goods-list/tian-goods-list-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("8d33"))
        })
    },
    [['uni_modules/tian-mall/components/tian-goods-list/tian-goods-list-create-component']]
]);
