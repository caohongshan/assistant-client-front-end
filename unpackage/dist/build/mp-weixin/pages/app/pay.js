(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/app/pay"],{"30e3":function(t,e,n){},"3a89":function(t,e,n){"use strict";n.r(e);var i=n("925b"),r=n("7690");for(var a in r)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(a);n("daf6");var o=n("f0c5"),s=Object(o["a"])(r["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);e["default"]=s.exports},"4f5f":function(t,e,n){"use strict";(function(t,i){var r=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(n("9523")),o=n("8657");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){(0,a.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}t.database();var u={data:function(){return{query:{},active:!1,showKeyboard:!1,chars:[],decimals:2,maxLength:8,dot:".",formData:{remarks:""},type:"",id:"61c9ae37b804f80001267d23",order:{}}},onLoad:function(t){if(t.q){var e=decodeURIComponent(t.q);Object.assign(t,c(c({},(0,o.getQueryString)(e)),{},{q:e}))}t.id?this.id=t.id:t.id=this.id,t.module||(t.module="shopqr"),console.log("onLoad",t),this.query=t,this.loadData(t),this.setGuangbiao(),i.hideHomeButton()},computed:{showMoney:function(){return this.chars.join("")},payMoney:function(){var t=this,e=0;return 0!=this.chars.length&&(e=-1==this.chars.indexOf(this.dot)?parseInt(this.chars.join("")):this.chars[0]==this.dot?parseFloat("0"+this.chars.filter((function(e,n){return n<=t.decimals})).join("")):parseFloat(this.chars.join(""))),e.toFixed(this.decimals)},bgStyle:function(){return this.order.background?"background: url(".concat(this.order.background,");background-size: 100%;background-repeat: no-repeat;"):"background:#ffffff"}},methods:{focus:function(){this.showKeyboard=!1},blur:function(){this.showKeyboard=!0},del:function(){this.chars.length>0&&this.chars.pop()},btn:function(t,e){if(e)-1==this.chars.indexOf(t)&&this.chars.push(t);else{var n=this.chars.indexOf(this.dot);if(-1==n&&this.chars.length>=this.maxLength)return;if(0==n);else if(n>this.maxLength)return;(-1==this.chars.indexOf(this.dot)||this.chars.length-n<=this.decimals)&&this.chars.push(t)}},loadData:function(t){var e=this;this.$request("payment/info",t).then((function(t){console.log(t),e.order=t.order,e.showKeyboard=!0})),i.getProvider({service:"payment",success:function(t){e.type=t.provider[0],console.log("this.type",e.type)}})},setGuangbiao:function(){var t=this;this.active=!0,setTimeout((function(){t.active=!1,setTimeout((function(){t.setGuangbiao()}),1e3)}),1e3)},paymentProcess:function(){var t=this;this.type&&(i.showLoading({title:"支付中",mask:!0}),this.$request("payment/pay",c(c(c({money:this.payMoney,type:this.type},this.formData),this.query),this.order)).then((function(e){i.hideLoading(),i.requestPayment(c(c({},e),{},{success:function(e){t.paySuccess()},fail:function(e){t.payFailed()}}))}),(function(e){t.payFailed()})))},paySuccess:function(t){var e=this;console.log("支付成功",t),this.$success("支付成功"),setTimeout((function(){i.redirectTo({url:"/pages/app/paysuccess?id=".concat(e.order.id)})}),2e3)},payFailed:function(){this.$message("支付失败"),this.loadData(this.query)}}};e.default=u}).call(this,n("a9ff")["default"],n("543d")["default"])},7690:function(t,e,n){"use strict";n.r(e);var i=n("4f5f"),r=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=r.a},"925b":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){}));var i=function(){var t=this.$createElement;this._self._c},r=[]},c9a4:function(t,e,n){"use strict";(function(t,e){var i=n("4ea4");n("3f59"),n("a9ff");i(n("66fd"));var r=i(n("3a89"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(r.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},daf6:function(t,e,n){"use strict";var i=n("30e3"),r=n.n(i);r.a}},[["c9a4","common/runtime","common/vendor"]]]);