(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/miaosha"],{"1a60":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={tianGoodsList:function(){return i.e("uni_modules/tian-mall/components/tian-goods-list/tian-goods-list").then(i.bind(null,"8d33"))}},n=function(){var t=this.$createElement;this._self._c},o=[]},"2d09":function(t,e,i){},"39d8":function(t,e,i){"use strict";(function(t,e){var a=i("4ea4");i("3f59"),i("a9ff");a(i("66fd"));var n=a(i("d9cb"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(n.default)}).call(this,i("bc2e")["default"],i("543d")["createPage"])},c773:function(t,e,i){"use strict";(function(t){var a=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("9523"));function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){(0,n.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var s=t.database(),c={data:function(){return{loadmore:0,miaoshaTimeOut:{hour:"00",minute:"00",second:"00"},miaosha_id:"",configs:{itemClassName:"margin-bottom-20 padding-bottom-20 ",image_size:"190x190",showMiaosha:!0,page_size:10,loadmore:!0,order:"miaosha.limit_stock desc"},miaosha:{},shiduan:[]}},onLoad:function(t){t.id&&(this.miaosha_id=t.id),this.getShiduan()},onReachBottom:function(){console.log("加载下一页"),this.loadmore=Date.now()},computed:{condition:function(){return this.miaosha_id?'miaosha.miaosha_id=="'.concat(this.miaosha_id,'" && miaosha.limit_stock >= 0 && miaosha.enable==true && miaosha.end_time>$cloudEnv_now'):""}},beforeDestroy:function(){this.miaoshaTimerId&&clearTimeout(this.miaoshaTimerId)},methods:{getShiduan:function(){var t=this;s.action("check_miaosha").collection("tian-mall-hour-miaosha").where("state==1").get().then((function(e){var i=e.result,a=(new Date).getHours();t.shiduan=i.data.map((function(t,e){return r(r({},t),{},{selected:0==e,isBegin:t.hour<=a,name:(t.hour<10?"0"+t.hour:t.hour)+":00"})})),t.shiduan.length>0&&(t.miaosha=t.shiduan[0],t.miaosha_id=t.miaosha._id,t.beginMiaoshaTimer())}))},changeTab:function(t){var e=this;this.shiduan.forEach((function(i,a){i.selected=a==t,i.selected&&(e.miaosha_id=i._id)}))},beginMiaoshaTimer:function(){var t=this,e=parseInt((this.miaosha.end_time-Date.now())/1e3);if(this.miaosha.isBegin){if(e<1)return void this.getShiduan()}else e=parseInt((this.miaosha.begin_time-Date.now())/1e3),e<1&&(this.miaosha.isBegin=!0,this.$refs.tianGoodsList.reloadData());this.getTimeString(e),this.miaoshaTimerId=setTimeout((function(){t.beginMiaoshaTimer()}),1e3)},getTimeString:function(t){var e=parseInt(t/3600),i=parseInt((t-3600*e)/60),a=t-3600*e-60*i;e<10&&(e="0"+e),i<10&&(i="0"+i),a<10&&(a="0"+a),this.miaoshaTimeOut={hour:e,minute:i,second:a}}}};e.default=c}).call(this,i("a9ff")["default"])},d9cb:function(t,e,i){"use strict";i.r(e);var a=i("1a60"),n=i("fb1c");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("f77d");var r=i("f0c5"),s=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=s.exports},f77d:function(t,e,i){"use strict";var a=i("2d09"),n=i.n(a);n.a},fb1c:function(t,e,i){"use strict";i.r(e);var a=i("c773"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a}},[["39d8","common/runtime","common/vendor"]]]);