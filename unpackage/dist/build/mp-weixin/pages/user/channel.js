(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/channel"],{"4cad":function(t,e,n){},8758:function(t,e,n){"use strict";(function(t,o){var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("9523")),r=n("08df"),u=a(n("a91e"));function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){(0,i.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var c=t.database();function l(t){var e={};for(var n in r.validator)t.indexOf(n)>-1&&(e[n]=r.validator[n]);return e}var f={mixins:[u.default],data:function(){return{type:"2",loaded:!1,qrcode:"",formDataId:"",address:{},formData:{status:0,title:"",mobile:null},dayTotal:[],formOptions:{},rules:d({},l(["title","mobile","status"]))}},onLoad:function(t){t.type&&(this.type=t.type),this.loadData()},onReady:function(){this.$refs.form&&this.$refs.form.setRules(this.rules)},watch:{userInfo:function(){this.loadData()}},computed:{isEdit:function(){return 0==this.formData.status||3==this.formData.status},userInfo:function(){return this.$store.state.user.userInfo}},methods:{chooseAddress:function(){var t=this;o.chooseLocation({success:function(e){t.address={name:e.name,address:e.address,longitude:e.longitude,latitude:e.latitude}}})},submit:function(){var t=this;o.showLoading({mask:!0}),this.$refs.form.submit().then((function(e){t.address.name?(e.status=1,e.address=t.address,e.modified=Date.now(),t.submitForm(e)):t.$message("请选择地址")})).catch((function(t){o.hideLoading()}))},submitForm:function(t){var e=this;this.formDataId?c.action("channel_apply").collection("uni-id-channel").doc(this.formDataId).update(t).then((function(t){o.showToast({icon:"none",title:"修改成功"})})).catch((function(t){o.showModal({content:t.message||"请求服务失败",showCancel:!1})})).finally((function(){o.hideLoading(),e.loadData()})):c.action("genStringId,channel_apply").collection("uni-id-channel").add(t).then((function(t){o.showToast({icon:"none",title:"申请成功"})})).catch((function(t){o.showModal({content:t.message||"请求服务失败",showCancel:!1})})).finally((function(){o.hideLoading(),e.loadData()}))},loadData:function(){var t=this;console.log("this.userInfo",this.userInfo),this.userInfo._id&&c.collection("uni-id-channel").where("user_id==$cloudEnv_uid").get({getOne:!0}).then((function(e){var n=e.result;if(n.data){if(t.address=n.data.address,t.formDataId=n.data._id,delete n.data._id,2==n.data.status){if(n.data.total=n.data.total?n.data.total:0,n.data.day_total){var o=[];for(var a in n.data.day_total)o.push({time:a,day:t.$dateFormat("Y-m-d",a),total:n.data.day_total[a]});o.sort((function(t,e){return e.time-t.time})),t.dayTotal=o,console.log("this.dayTotal",t.dayTotal)}t.setGlobalShareContent(),console.log("this.share",t.share),setTimeout((function(){t.$refs.uqrcode.make({size:355,text:t.share.href})}),1e3)}t.formData=n.data}t.loaded=!0,console.log("result",n)}))},goHome:function(){o.switchTab({url:"/pages/index/index"})}}};e.default=f}).call(this,n("a9ff")["default"],n("543d")["default"])},"9c65":function(t,e,n){"use strict";n.r(e);var o=n("8758"),a=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},ba46:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var o={uniLoadMore:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-load-more/components/uni-load-more/uni-load-more")]).then(n.bind(null,"345c"))},uqrcode:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/Sansnn-uQRCode/components/uqrcode/uqrcode")]).then(n.bind(null,"b82a"))},uniForms:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(n.bind(null,"9682"))},uniFormsItem:function(){return n.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item").then(n.bind(null,"1f74"))},uniEasyinput:function(){return n.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(n.bind(null,"a6fd"))}},a=function(){var t=this.$createElement;this._self._c},i=[]},c777:function(t,e,n){"use strict";(function(t,e){var o=n("4ea4");n("3f59"),n("a9ff");o(n("66fd"));var a=o(n("ce75"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(a.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},ce75:function(t,e,n){"use strict";n.r(e);var o=n("ba46"),a=n("9c65");for(var i in a)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("e0ef");var r=n("f0c5"),u=Object(r["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);e["default"]=u.exports},e0ef:function(t,e,n){"use strict";var o=n("4cad"),a=n.n(o);a.a}},[["c777","common/runtime","common/vendor"]]]);