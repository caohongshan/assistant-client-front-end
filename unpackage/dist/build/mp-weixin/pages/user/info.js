(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/info"],{"02d4":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}));var i={uniList:function(){return n.e("uni_modules/uni-list/components/uni-list/uni-list").then(n.bind(null,"7f52"))},uniListItem:function(){return n.e("uni_modules/uni-list/components/uni-list-item/uni-list-item").then(n.bind(null,"a5e7"))}},o=function(){var t=this.$createElement;this._self._c},s=[]},"0cb9":function(t,e,n){"use strict";(function(t){var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n("9523"));n("9b07");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){(0,o.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u={data:function(){return{cachekey:"tiantian-accounts",isBindWx:!1,info:{}}},onLoad:function(){t.setStorage({key:"avatarField",data:"avatar"}),console.log(this.cashoutTypes)},computed:{userInfo:function(){return this.$store.state.user.userInfo},cashoutTypes:function(){return this.userInfo.cashoutType},enableWxpay:function(){return this.cashoutTypes&&this.cashoutTypes.filter((function(t){return"wxpay"==t.value})).length>0},enableBank:function(){return this.cashoutTypes&&this.cashoutTypes.filter((function(t){return"bank"==t.value})).length>0},enableAlipay:function(){return this.cashoutTypes&&this.cashoutTypes.filter((function(t){return"alipay"==t.value})).length>0},customer:function(){return this.$store.state.app.customer},mobileStatusText:function(){return this.userInfo.mobile?this.userInfo.mobile:"去绑定"},bankStatusText:function(){return this.userInfo.bankinfo?this.userInfo.bankinfo.title:"去绑定"},alipayStatusText:function(){return this.userInfo.alipayinfo?this.userInfo.alipayinfo.name:"去绑定"},wxStatusText:function(){return this.userInfo.wx_openid&&this.userInfo.wx_openid["app-plus"]?(this.isBindWx=!0,"已绑定"):"去绑定"}},methods:{cancellation:function(){var e=this;this.confirmAction((function(){e.$request("user/info/cancellation",{},{showModal:!1,loading:!0}).then((function(){e.$success("注销成功"),e.localLogout()}),(function(e){t.showModal({title:"注销失败",content:e.message+"\n请联系客服协助处理",cancelText:"放弃注销",confirmText:"找客服",success:function(e){e.confirm&&t.redirectTo({url:"/pages/app/contact"})}})}))}),"请确认您已经准备放弃本账户？若不满足自主注销条件请联系客服协助完成","温馨提示")},localLogout:function(){var e=this,n=[];if(this.dataList=t.getStorageSync(this.cachekey),this.dataList&&this.dataList.length>1&&(n=this.dataList.filter((function(t){return t._id!=e.userInfo._id}))),t.setStorageSync(this.cachekey,n),0==n.length)this.$store.commit("user/REMOVE_TOKEN"),this.$store.commit("user/SET_USER_INFO",{}),this.$store.commit("mall/UPDATE_CART_NUMBER",0);else{var i=n[0];this.$store.commit("user/SET_TOKEN",{token:i.token,tokenExpired:i.tokenExpired,userInfo:i})}t.hideLoading(),t.exitMiniProgram()},bindWeixinH5:function(){if(this.isBindWx)return!1;this.customer.wx_auth&&(window.location.href=this.customer.wx_auth)},bindWeixin:function(){var e=this;if(this.isBindWx)return!1;t.login({provider:"weixin",success:function(t){console.log("授权code",t),e.$request("user/info/bind_weixin",r({},t),{loading:!0}).then((function(t){console.log("bind_weixin",t),e.$store.dispatch("user/getUserInfo")}))}})},bind:function(e){var n=this;console.log("bind "+e),t.login({provider:e,success:function(t){console.log("授权code",t),n.$request("user/info/bind",r({provider:e},t),{loading:!0}).then((function(t){console.log("bind "+e,t),n.$store.dispatch("user/getUserInfo")}))},fail:function(t){console.log(t),n.$message("授权失败")}})},changeNickname:function(){this.$refs.nicknamePopup.open()},confirmEditNickname:function(t){this.editData({nickname:t})},changeAvatar:function(){t.chooseImage({count:1,sizeType:["compressed"],sourceType:["camera","album"],crop:{quality:5,width:200,height:200},success:function(e){console.log(e),e.tempFilePaths.length>0&&(t.setStorage({key:"avatar",data:e.tempFilePaths[0]}),t.navigateTo({url:"/pages/user/avatar"}))}})},editData:function(t){var e=this;console.log("editData",t),this.$request("user/info/edit",t,{loading:!0}).then((function(t){e.$store.dispatch("user/getUserInfo")}))}}};e.default=u}).call(this,n("543d")["default"])},ac91:function(t,e,n){"use strict";n.r(e);var i=n("0cb9"),o=n.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=o.a},b8bf:function(t,e,n){"use strict";n.r(e);var i=n("02d4"),o=n("ac91");for(var s in o)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(s);var r=n("f0c5"),u=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);e["default"]=u.exports},dc26:function(t,e,n){"use strict";(function(t,e){var i=n("4ea4");n("3f59"),n("a9ff");i(n("66fd"));var o=i(n("b8bf"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])}},[["dc26","common/runtime","common/vendor"]]]);