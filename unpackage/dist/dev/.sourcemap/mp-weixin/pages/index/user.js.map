{"version":3,"sources":["uni-app:///main.js","webpack:///H:/private/AIproject/psychic/assistant-client-front-end/pages/index/user.vue?c245","webpack:///H:/private/AIproject/psychic/assistant-client-front-end/pages/index/user.vue?081e","webpack:///H:/private/AIproject/psychic/assistant-client-front-end/pages/index/user.vue?b793","webpack:///H:/private/AIproject/psychic/assistant-client-front-end/pages/index/user.vue?1f18","uni-app:///pages/index/user.vue","webpack:///H:/private/AIproject/psychic/assistant-client-front-end/pages/index/user.vue?7fb1","webpack:///H:/private/AIproject/psychic/assistant-client-front-end/pages/index/user.vue?22ac"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","mixins","data","hasSign","isLocalLogin","adminShops","showTeamPopup","taskBtnText","signTask","orderList","stateMap","optionDataList","options","enumConverter","computed","isLogin","userInfo","userScore","adConfig","scoreName","watch","console","onPullDownRefresh","uni","onLoad","onShow","methods","loadData","getStatistics","db","total","result","where","groupBy","groupField","get","then","getShopAdmin","field","applyIds","e","applyShops","getShopApply","getSignTask","buildSignTask","task","buildTaskResult","navToSign","logout","localLogout","checkTeam","closeInvite","title","content","confirmText","cancelText","success","mobile","loading","confirmInvite","initOptions","defColor","color","type","text","checkLogin","open_url","checkMobile","mustLogin","initOrder","state","getPhoneNumber","sessionKey","uid","openid","navToUserInfo","login","editData","changeAccount"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACc;;;AAGjE;AAC+K;AAC/K,gBAAgB,wLAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,sQAEN;AACP,KAAK;AACL;AACA,aAAa,gQAEN;AACP,KAAK;AACL;AACA,aAAa,gWAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC/DA;AAAA;AAAA;AAAA;AAAgpB,CAAgB,qqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACoIpqB;AACA;AACA;AAAA;AAAA;AAEA;AAAA,eAEA;EACAC;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC,2BACAC;IAEA;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QACA;MACA;MACA;IACA;IACAC;MACA;QACA;MACA;MACA;IACA;EACA;EACAC;IACAV;MACAW;MACA;IACA;EACA;EACA;EACAC;IACAD;IACA;IACAE;EACA;EACAC;IACAD;IACA;IACA;IACA;EACA;EACAE;IACAJ;IACA;IACA;IACA;MACA;IACA;EACA;EACAK;IACAC;MACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KACA;kBAAA;kBAAA;gBAAA;gBACA;gBACA;kBACAP;kBACA;kBACA;gBACA;kBACAA;gBACA;gBACA;gBACA;gBACAX;gBAAA;gBAAA,OAKAmB;cAAA;gBAAA;gBAFAC,8BADAC,OACAD;gBAGApB;gBACA;gBACAmB,kCACAG,4DACAC,iBACAC,gCACAC,MACAC,qBAEA;kBAAA,IADAL;kBAEA;kBACAA;oBACArB;kBACA;kBACA;gBACA;gBACA;gBAAA;gBAAA;cAAA;gBAEA;gBACA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA2B;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OAIAR,yFACAS,MACA,mDACA;cAAA;gBAAA;gBAJAP;gBAKAQ;gBACAR;kBACAS;kBACA;oBACAD;kBACA;gBACA;gBAAA;gBAAA,OACA;cAAA;gBAAAE;gBACA;gBACApB;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAqB;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OAIAb,wEACA,sDACA;cAAA;gBAAA;gBAHAE;gBAAA,kCAIAA;kBAAA;gBAAA;kBACAS;kBACAA;kBACAA;kBACA;oBACAA;kBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;AACA;AACA;IACAG;MAAA;MACA;QACA;MACA;IACA;IACA;AACA;AACA;IACAC;MACA;QACA;MACA;MACA;MACA;MACA;QACA;QACAC;MACA;MACA;MACAxB;IACA;IACAyB;MACA;MACA;MACA;IACA;IACAC;MACA;QACA;QACA;MACA;MACA;IACA;IACAC;MAAA;MACA;QACA,0CACA;UACA3B;UACA;QACA,GACA;UACAA;UACA;QACA,EACA;MACA;IACA;IACA4B;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC;MAAA;MACA5B;QACA6B;QACAC;QACAC;QACAC;QACAC;UACA;YACA,gBACA;cACAC;YACA;cACAC;YACA,EACA;cACArC;cACA;cACA;cACA;YACA;UACA;YACA;UACA;QACA;MACA;IACA;IACAsC;MAAA;MACA;QACA;QACA;MACA;MACA;MACA,cACA;QACAF;MACA;QACAC;MACA,EACA;QACArC;QACA;QACA;QACA;QACA;MACA;IACA;IACAuC;MACA;QACAC;QACAC;MACA;QACAC;QACAC;QACAC;QACAC;MACA;QACAH;QACAC;QACAC;QAEAE;QAAA;;QAEAD;MACA,GACA;QACAH;QACAC;QACAC;QAEAE;QAAA;;QAEAD;MACA,GACA;QACAH;QACAC;QACAC;QAEAE;QAAA;;QAEAD;MACA,GACA;QACAH;QACAC;QACAC;QACAC;MACA,GACA;QACAH;QACAC;QACAC;QACAC;MACA,GACA;QACAH;QACAC;QACAC;QACAC;MACA,GACA;QACAH;QACAC;QACAC;QACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACAH;QACAC;QACAC;QACAC;MACA,GACA;QACAH;QACAC;QACAC;QACAC;MACA,GACA;QACAH;QACAC;QACAC;QACAC;MACA,GACA;QACAH;QACAC;QACAC;QACAC;MACA,GACA;QACAH;QACAC;QACAC;QACAC;MACA,GACA;QACAH;QACAC;QACAC;QACAC;MACA,GACA;QACAH;QACAC;QACAE;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MAAA,CACA;;MAeAvD;QACAoD;QACAC;QACAC;QAEAE;QAAA;;QAEAD;MACA;MACAvD;QACAoD;QACAC;QACAC;QAEAE;QAAA;;QAEAD;MACA;MACA;QACAvD;UACAoD;UACAC;UACAI;UACAF;QACA;MACA;MACAvD;QACA;UACA6B;QACA;UACAA;QACA;MACA;MACA;IACA;IACA6B;MAAA;MACA;QACAR;QACAC;MACA;QACAC;QACAC;QACAC;QACAK;QACAJ;MACA,GACA;QACAH;QACAC;QACAC;QACAK;QACAJ;MACA,GACA;QACAH;QACAC;QACAC;QACAK;QACAJ;MACA,GACA;QACAH;QACAC;QACAC;QACAK;QACA;QACAJ;MACA,GACA;QACAH;QACAC;QACAC;QACAK;QACAJ;MACA,EACA;MACAvD;QACA;UACA6B;QACA;UACAA;QACA;QACA;UACAA;QACA;UACAA;QACA;MACA;MACA;IACA;IACA;AACA;AACA;AACA;IACA+B;MAAA;MACAlD;MACA;QACA;MACA;MACA,yEACAmB;QACAgC;QACAC;QACAC;MAAA,IACA;QACAhB;MACA;QACA;QACArC;QACA;QACA;MACA;IACA;IACAsD;MACA,WACA;QACAC;MACA,EACA;IACA;IACAC;MAAA;MACAxD;MACA;QACAqC;MACA;QACA;QACA;MACA;IACA;IACAoB;MACA;IAAA;EAEA;AACA;AAAA,2B;;;;;;;;;;;;;AC5pBA;AAAA;AAAA;AAAA;AAAmuC,CAAgB,gsCAAG,EAAC,C;;;;;;;;;;;ACAvvC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/user.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/index/user.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./user.vue?vue&type=template&id=21bf4c21&\"\nvar renderjs\nimport script from \"./user.vue?vue&type=script&lang=js&\"\nexport * from \"./user.vue?vue&type=script&lang=js&\"\nimport style0 from \"./user.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/user.vue\"\nexport default component.exports","export * from \"-!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user.vue?vue&type=template&id=21bf4c21&\"","var components\ntry {\n  components = {\n    tianIcons: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/tian-mall/components/tian-icons/tian-icons\" */ \"@/uni_modules/tian-mall/components/tian-icons/tian-icons.vue\"\n      )\n    },\n    uniPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup/uni-popup\" */ \"@/uni_modules/uni-popup/components/uni-popup/uni-popup.vue\"\n      )\n    },\n    uniPopupDialog: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog\" */ \"@/uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.adminShops && _vm.adminShops.length > 0\n  var l0 = g0\n    ? _vm.__map(_vm.adminShops, function (item, index) {\n        var $orig = _vm.__get_orig(item)\n        var m0 = _vm.$thumbImg(item.src, \"80x80\")\n        return {\n          $orig: $orig,\n          m0: m0,\n        }\n      })\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"user-container\">\r\n\t\t<view class=\"header border-radius padding-22\">\r\n\t\t\t<view class=\"header-panel padding-bottom-22 \">\r\n\t\t\t\t<image :src=\"userInfo.avatar\" mode=\"aspectFill\" @click=\"navToUserInfo\"\r\n\t\t\t\t\tclass=\"image-width-120 bg-white border-radius padding-2\"></image>\r\n\t\t\t\t<view class=\" margin-left-30 colorWhite flex-1\">\r\n\t\t\t\t\t<view class=\"padding-top-8\" @click=\"navToUserInfo\">\r\n\t\t\t\t\t\t<text>{{ userInfo.nickName }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"font-24 padding-top-14\" v-if=\"userInfo.my_invite_code\">\r\n\t\t\t\t\t\t<text>邀请码：</text>\r\n\t\t\t\t\t\t<text>{{userInfo.my_invite_code}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"font-24 \" v-if=\"userInfo.mobile\">\r\n\t\t\t\t\t\t<text>手机号：</text>\r\n\t\t\t\t\t\t<text>{{ userInfo.mobile }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"font-20 member \" v-if=\"userInfo.member\">\r\n\t\t\t\t\t\t<text class=\"name\">{{ userInfo.member.name }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<tian-icons type=\"singin\" v-if=\"hasSign\" icolor=\"#ffffff\" size=\"28\" @click=\"navToSign\">\r\n\t\t\t\t\t<text class=\"font-20 colorWhite\">{{taskBtnText}}</text>\r\n\t\t\t\t</tian-icons>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"ti-flex margin-top-40 colorWhite padding-bottom-22\">\r\n\t\t\t\t<view class=\"ti-flex flex-column flex-1\" @click=\"navTo('/pages/user/balances', {}, { login: 1 })\">\r\n\t\t\t\t\t<text>{{ userInfo.balance / 100 }}</text>\r\n\t\t\t\t\t<text class=\"font-24\">余额</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"ti-flex flex-column flex-1 left-line\"\r\n\t\t\t\t\t@click=\"navTo('/pages/user/scores', {}, { login: 1 })\">\r\n\t\t\t\t\t<text>{{ userScore }}</text>\r\n\t\t\t\t\t<text class=\"font-24\">{{scoreName}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex-1 left-line\">\r\n\t\t\t\t\t<button v-if=\"isLogin && !userInfo.hasMobile\" open-type=\"getPhoneNumber\"\r\n\t\t\t\t\t\t@getphonenumber=\"getPhoneNumber\" class=\"unbutton\">\r\n\t\t\t\t\t\t<view class=\"ti-flex flex-column colorWhite\" style=\"font-weight:normal;\">\r\n\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\tclass=\"font-28 padding-bottom-8\">{{ userInfo.statistics?userInfo.statistics.invite_all_total:0 }}</text>\r\n\t\t\t\t\t\t\t<text class=\"font-24\">粉丝</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<view class=\"ti-flex flex-column\" v-else\r\n\t\t\t\t\t\t@click=\"navTo('/pages/user/team/member?level=0&title=我的粉丝', {}, { login: 1 })\">\r\n\t\t\t\t\t\t<text>{{ userInfo.statistics?userInfo.statistics.invite_all_total:0 }}</text>\r\n\t\t\t\t\t\t<text class=\"font-24\">粉丝</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"ti-flex flex-column flex-1 left-line\"\r\n\t\t\t\t\t@click=\"navTo('/pages/user/coupons', {}, { login: 1 })\">\r\n\t\t\t\t\t<text>{{ userInfo.coupon }}</text>\r\n\t\t\t\t\t<text class=\"font-24\">优惠券</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"content-body margin-22 padding-22 bg-white border-radius\">\r\n\t\t\t<view class=\"title ti-flex between\" @click=\"navTo('/pages/order/order?type=all', {}, { login: true })\">\r\n\t\t\t\t<tian-icons type=\"dingdan\" align=\"right\" icolor=\"#ffad90\">全部订单</tian-icons>\r\n\t\t\t\t<tian-icons type=\"xiangyou1\" align=\"left\" color=\"#c5c5c5\"><text>查看</text></tian-icons>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"ti-flex margin-top-60 padding-bottom-22 text-center\">\r\n\t\t\t\t<tian-icons v-for=\"(op, index) in orderList\" :key=\"index\" :type=\"op.type\" :icolor=\"op.color\" size=\"30\"\r\n\t\t\t\t\tclass=\"flex-1\" :badge=\"op.total\" @click=\"navTo(op.open_url, {}, { login: op.checkLogin })\">\r\n\t\t\t\t\t<text class=\"font-24 margin-top-12\">{{ op.text }}</text>\r\n\t\t\t\t</tian-icons>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"content-body margin-22 padding-22 bg-white border-radius\" v-if=\"adminShops && adminShops.length>0\">\r\n\t\t\t<view class=\"title ti-flex between\">\r\n\t\t\t\t<tian-icons type=\"dianpu\" align=\"right\" icolor=\"#ffad90\">我的门店</tian-icons>\r\n\t\t\t\t<tian-icons type=\"xiangyou1\" align=\"left\" color=\"#c5c5c5\"\r\n\t\t\t\t\t@click=\"navTo('/pages/enterprise/apply?mobile=true', {}, { login: true })\"><text>申请入驻</text>\r\n\t\t\t\t</tian-icons>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"\">\r\n\t\t\t\t<view v-for=\"(item,index) in adminShops\" :key=\"index\"\r\n\t\t\t\t\tclass=\"margin-top-20 ti-flex under-line padding-bottom-20\" @click=\"navTo(item.page,item)\">\r\n\t\t\t\t\t<image :src=\"$thumbImg(item.src,'80x80')\" mode=\"aspectFill\" class=\"image-width-80 border-radius\">\r\n\t\t\t\t\t</image>\r\n\t\t\t\t\t<view class=\"flex-1 margin-left-12\">\r\n\t\t\t\t\t\t<text class=\"font-32\">{{item.name}}</text>\r\n\t\t\t\t\t\t<text v-if=\"item.id\">({{item.id}})</text>\r\n\t\t\t\t\t\t<text v-if=\"item.stateText\" class=\"margin-left-10 colorRed\">{{item.stateText}}</text>\r\n\t\t\t\t\t\t<view class=\" font-24 margin-top-8 colorRed\" v-if=\"item.apply_result\">\r\n\t\t\t\t\t\t\t<text>{{item.apply_result}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\" font-24 colorGray margin-top-8\" v-else-if=\"item.address\">\r\n\t\t\t\t\t\t\t<text>{{item.address.address}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<tian-icons type=\"xiangyou1\" align=\"left\" color=\"#c5c5c5\">\r\n\t\t\t\t\t</tian-icons>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"content-body margin-22 padding-22 bg-white border-radius\">\r\n\t\t\t<view class=\"title ti-flex between\">\r\n\t\t\t\t<tian-icons type=\"wode\" align=\"right\" icolor=\"#ffad90\">个人管理</tian-icons>\r\n\t\t\t\t<tian-icons type=\"xiangyou1\" align=\"left\" color=\"#c5c5c5\"\r\n\t\t\t\t\t@click=\"navTo('/pages/user/info', {}, { login: true })\">查看</tian-icons>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"ti-flex margin-top-60 padding-bottom-22 options\">\r\n\t\t\t\t<view class=\"opt-item\" v-for=\"(op, index) in optionDataList\" :key=\"index\"\r\n\t\t\t\t\tv-if=\"!op.mustLogin || isLogin\">\r\n\t\t\t\t\t<button v-if=\"op.checkMobile && !userInfo.hasMobile\" open-type=\"getPhoneNumber\"\r\n\t\t\t\t\t\t@getphonenumber=\"getPhoneNumber\" class=\"unbutton\">\r\n\t\t\t\t\t\t<tian-icons :type=\"op.type\" :icolor=\"op.color\" size=\"26\" class=\"\">\r\n\t\t\t\t\t\t\t<text class=\"font-24 margin-top-12\">{{ op.text }}</text>\r\n\t\t\t\t\t\t</tian-icons>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<tian-icons v-else :type=\"op.type\" :icolor=\"op.color\" size=\"26\" class=\"\"\r\n\t\t\t\t\t\t@click=\"navTo(op.open_url, {}, { login: op.checkLogin })\">\r\n\t\t\t\t\t\t<text class=\"font-24 margin-top-12\">{{ op.text }}</text>\r\n\t\t\t\t\t</tian-icons>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<uni-popup v-if=\"showTeamPopup\" ref=\"teamPopup\" type=\"dialog\">\r\n\t\t\t<uni-popup-dialog mode=\"input\" message=\"成功消息\" title=\"加入团队提示\" placeholder=\"请输入邀请者手机号/邀请码\" :duration=\"2000\"\r\n\t\t\t\t:before-close=\"true\" @close=\"closeInvite\" @confirm=\"confirmInvite\"></uni-popup-dialog>\r\n\t\t</uni-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport tabbarMixin from './mixin/tabbar';\r\n\timport adMixin from '@/common/mixin/ad';\r\n\timport { enumConverter } from '../../js_sdk/validator/tian-mall-shop-apply.js';\r\n\t\r\n\tconst db = uniCloud.database();\r\n\t\r\n\texport default {\r\n\t\tmixins: [tabbarMixin, adMixin],\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\thasSign: false,\r\n\t\t\t\tisLocalLogin: false,\r\n\t\t\t\tadminShops: [],\r\n\t\t\t\tshowTeamPopup: false, //兼容微信小程序，如果使用默认配置，界面上会弹出键盘\r\n\t\t\t\ttaskBtnText: \"\",\r\n\t\t\t\tsignTask: {},\r\n\t\t\t\torderList: [],\r\n\t\t\t\tstateMap: {},\r\n\t\t\t\toptionDataList: [],\r\n\t\t\t\toptions: {\r\n\t\t\t\t\t...enumConverter\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tisLogin() {\r\n\t\t\t\treturn this.$store.getters['user/isTokenValid'];\r\n\t\t\t},\r\n\t\t\tuserInfo() {\r\n\t\t\t\treturn this.$store.state.user.userInfo;\r\n\t\t\t},\r\n\t\t\tuserScore() {\r\n\t\t\t\treturn parseInt(this.userInfo.score);\r\n\t\t\t},\r\n\t\t\tadConfig() {\r\n\t\t\t\tif (this.$store.state && this.$store.state.app.adConfig && this.$store.state.app.adConfig.tasks) {\r\n\t\t\t\t\treturn this.$store.state.app.adConfig.tasks;\r\n\t\t\t\t}\r\n\t\t\t\treturn {};\r\n\t\t\t},\r\n\t\t\tscoreName() {\r\n\t\t\t\tif (this.$store.state.app.customer.scoreName) {\r\n\t\t\t\t\treturn this.$store.state.app.customer.scoreName;\r\n\t\t\t\t}\r\n\t\t\t\treturn \"积分\";\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\tstateMap(newVal) {\r\n\t\t\t\tconsole.log('watch stateMap', newVal);\r\n\t\t\t\tthis.initOrder();\r\n\t\t\t}\r\n\t\t},\r\n\t\t//下拉刷新\r\n\t\tonPullDownRefresh() {\r\n\t\t\tconsole.log('用户刷新整页');\r\n\t\t\tthis.getStatistics();\r\n\t\t\tuni.stopPullDownRefresh();\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\tuni.hideLoading();\r\n\t\t\tthis.initOrder();\r\n\t\t\tthis.initOptions();\r\n\t\t\t// this.getStatistics();\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tconsole.log(\"user onShow\")\r\n\t\t\t//刷新用户统计信息，余额，积分，优惠券，订单数量\r\n\t\t\t// this.getStatistics();\r\n\t\t\tif (!this.isLocalLogin) {\r\n\t\t\t\tthis.getStatistics()\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tloadData() {\r\n\t\t\t\tthis.getStatistics()\r\n\t\t\t},\r\n\t\t\tasync getStatistics() {\r\n\t\t\t\tif (this.isLogin) {\r\n\t\t\t\t\t// this.isLocalLogin = true;\r\n\t\t\t\t\tthis.$request('user/info/info').then(res => {\r\n\t\t\t\t\t\tconsole.log('user statitics', res);\r\n\t\t\t\t\t\tthis.$store.commit('user/SET_USER_INFO', res);\r\n\t\t\t\t\t\tthis.initOptions();\r\n\t\t\t\t\t}, err => {\r\n\t\t\t\t\t\tconsole.log(\"getStatistics err\", err)\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.getSignTask();\r\n\t\t\t\t\t//查询退换货数量\r\n\t\t\t\t\tlet stateMap = {};\r\n\t\t\t\t\tlet {\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\ttotal\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} = await db.collection(\"tian-mall-order-refunds\").where(\"user_id==$cloudEnv_uid\").count();\r\n\t\t\t\t\tstateMap[\"refund\"] = total\r\n\t\t\t\t\t//订单统计\r\n\t\t\t\t\tdb.collection('tian-mall-orders')\r\n\t\t\t\t\t\t.where('user_id==$cloudEnv_uid && is_delete==0 && state>=0')\r\n\t\t\t\t\t\t.groupBy('state')\r\n\t\t\t\t\t\t.groupField('count(*) as total')\r\n\t\t\t\t\t\t.get()\r\n\t\t\t\t\t\t.then(({\r\n\t\t\t\t\t\t\tresult\r\n\t\t\t\t\t\t}) => {\r\n\t\t\t\t\t\t\t// console.log('user statitics2', result.data);\r\n\t\t\t\t\t\t\tresult.data.forEach(stat => {\r\n\t\t\t\t\t\t\t\tstateMap[stat.state] = stat.total;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.stateMap = stateMap;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tthis.getShopAdmin();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.isLocalLogin = false;\r\n\t\t\t\t\tthis.stateMap = {};\r\n\t\t\t\t\tthis.initOptions();\r\n\t\t\t\t\tthis.adminShops = []\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync getShopAdmin() {\r\n\t\t\t\t//查询店铺信息\r\n\t\t\t\tlet {\r\n\t\t\t\t\tresult\r\n\t\t\t\t} = await db.collection('tian-mall-shops').where(\"uid==$cloudEnv_uid || employees==$cloudEnv_uid\")\r\n\t\t\t\t\t.field(\r\n\t\t\t\t\t\t\"name,id,src,online,address,phone,apply_id\").limit(\r\n\t\t\t\t\t\t20).get();\r\n\t\t\t\tlet applyIds = []\r\n\t\t\t\tresult.data.forEach(e => {\r\n\t\t\t\t\te.page = '/pages/enterprise/detail';\r\n\t\t\t\t\tif (e.apply_id) {\r\n\t\t\t\t\t\tapplyIds.push(e.apply_id)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tlet applyShops = await this.getShopApply(applyIds)\r\n\t\t\t\tthis.adminShops = result.data.concat(applyShops);\r\n\t\t\t\tconsole.log(\"tian-mall-shops\", result)\r\n\t\t\t},\r\n\t\t\tasync getShopApply(applyIds) {\r\n\t\t\t\t//查询申请中的门店\r\n\t\t\t\tlet {\r\n\t\t\t\t\tresult\r\n\t\t\t\t} = await db.collection('tian-mall-shop-apply').where(\"uid==$cloudEnv_uid\").field(\r\n\t\t\t\t\t\"name,src,address,phone,id,state,apply_result\").limit(\r\n\t\t\t\t\t200).get();\r\n\t\t\t\treturn result.data.filter(e => applyIds.indexOf(e._id) == -1).map(e => {\r\n\t\t\t\t\te.isApply = true;\r\n\t\t\t\t\te.page = '/pages/enterprise/apply?id=' + e._id;\r\n\t\t\t\t\te.stateText = this.options.state_valuetotext[e.state];\r\n\t\t\t\t\tif (e.state == 0) {\r\n\t\t\t\t\t\te.apply_result = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn e;\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 签到任务\r\n\t\t\t */\r\n\t\t\tgetSignTask() {\r\n\t\t\t\tthis.$request('user/info/sign_task', {}, {}).then(res => {\r\n\t\t\t\t\tthis.buildSignTask(res);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 获取签到任务\r\n\t\t\t */\r\n\t\t\tbuildSignTask(task) {\r\n\t\t\t\tif (!task) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.hasSign = true;\r\n\t\t\t\tthis.taskBtnText = \"签到\"\r\n\t\t\t\tif (task.log && task.log.result) {\r\n\t\t\t\t\tthis.taskBtnText = \"已签到\";\r\n\t\t\t\t\ttask.open_url = false\r\n\t\t\t\t}\r\n\t\t\t\tthis.signTask = task;\r\n\t\t\t\tconsole.log(\"this.signTask\", this.signTask)\r\n\t\t\t},\r\n\t\t\tbuildTaskResult(log) {\r\n\t\t\t\tdelete log.task;\r\n\t\t\t\tthis.signTask.log = log\r\n\t\t\t\tthis.buildSignTask(this.signTask);\r\n\t\t\t},\r\n\t\t\tnavToSign() {\r\n\t\t\t\tif (!this.signTask.open_url) {\r\n\t\t\t\t\tthis.$message(\"今日已签到\")\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.navTo(this.signTask.open_url, this.signTask)\r\n\t\t\t},\r\n\t\t\tlogout() {\r\n\t\t\t\tthis.confirmAction(() => {\r\n\t\t\t\t\tthis.$request('user/login/logout').then(\r\n\t\t\t\t\t\tres => {\r\n\t\t\t\t\t\t\tconsole.log('退出成功', res);\r\n\t\t\t\t\t\t\tthis.localLogout();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\terr => {\r\n\t\t\t\t\t\t\tconsole.log('退出失败', err);\r\n\t\t\t\t\t\t\tthis.localLogout();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t}, '是否确定退出系统？');\r\n\t\t\t},\r\n\t\t\tlocalLogout() {\r\n\t\t\t\t//移除本地token\r\n\t\t\t\tthis.$store.commit('user/REMOVE_TOKEN');\r\n\t\t\t\t//重置用户信息\r\n\t\t\t\tthis.$store.commit('user/SET_USER_INFO', {});\r\n\t\t\t\t//清空购物车\r\n\t\t\t\tthis.$store.commit('mall/UPDATE_CART_NUMBER', 0);\r\n\t\t\t\tthis.stateMap = {};\r\n\t\t\t},\r\n\t\t\tcheckTeam() {\r\n\t\t\t\t//检查是否存在上级邀请者inviter_uid\r\n\t\t\t\t// if (!this.userInfo.inviter_uid || this.userInfo.inviter_uid.length == 0) {\r\n\t\t\t\t// \tthis.showTeamPopup = true;\r\n\t\t\t\t// \tthis.$nextTick(() => {\r\n\t\t\t\t// \t\tthis.$refs.teamPopup.open();\r\n\t\t\t\t// \t})\r\n\t\t\t\t// \treturn;\r\n\t\t\t\t// }\r\n\t\t\t\tthis.navTo('/pages/user/team/team');\r\n\t\t\t},\r\n\t\t\tcloseInvite() {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '邀请提示',\r\n\t\t\t\t\tcontent: '是否确定放弃填写邀请人的权利？',\r\n\t\t\t\t\tconfirmText: '放弃权利',\r\n\t\t\t\t\tcancelText: '暂时不填',\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tthis.$request(\r\n\t\t\t\t\t\t\t\t'user/info/jointeam', {\r\n\t\t\t\t\t\t\t\t\tmobile: 'none'\r\n\t\t\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\t\tloading: true\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t).then(res => {\r\n\t\t\t\t\t\t\t\tconsole.log('jointeam', res);\r\n\t\t\t\t\t\t\t\t//设置成功,刷新用户信息\r\n\t\t\t\t\t\t\t\tthis.$store.dispatch('user/getUserInfo');\r\n\t\t\t\t\t\t\t\tthis.navTo('/pages/user/team');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$refs.teamPopup.close()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tconfirmInvite(value) {\r\n\t\t\t\tif (!value) {\r\n\t\t\t\t\tthis.$message('请填写邀请码');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\t//检查邀请码是否合理\r\n\t\t\t\tthis.$request(\r\n\t\t\t\t\t'user/info/jointeam', {\r\n\t\t\t\t\t\tmobile: value\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tloading: true\r\n\t\t\t\t\t}\r\n\t\t\t\t).then(res => {\r\n\t\t\t\t\tconsole.log('jointeam', res);\r\n\t\t\t\t\tthis.$success('邀请成功');\r\n\t\t\t\t\t//设置成功,刷新用户信息\r\n\t\t\t\t\tthis.$store.dispatch('user/getUserInfo');\r\n\t\t\t\t\tthis.$refs.teamPopup.close()\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tinitOptions() {\r\n\t\t\t\tlet colom = 5,\r\n\t\t\t\t\tdefColor = '#ec6535',\r\n\t\t\t\t\tcolor = '#ec6535';\r\n\t\t\t\tlet optionDataList = [{\r\n\t\t\t\t\t\ttype: 'gouwudai',\r\n\t\t\t\t\t\ttext: '分销业绩',\r\n\t\t\t\t\t\tcheckLogin: true,\r\n\t\t\t\t\t\topen_url: '/pages/user/achievement'\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\ttype: 'renwu',\r\n\t\t\t\t\t\ttext: '每日任务',\r\n\t\t\t\t\t\tcheckLogin: true,\r\n\t\t\t\t\t\t//#ifdef MP-WEIXIN\r\n\t\t\t\t\t\tcheckMobile: false, //检查手机号是否存在\r\n\t\t\t\t\t\t//#endif\r\n\t\t\t\t\t\topen_url: '/pages/user/tasks'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: 'fenxiang',\r\n\t\t\t\t\t\ttext: '分享好友',\r\n\t\t\t\t\t\tcheckLogin: true,\r\n\t\t\t\t\t\t//#ifdef MP-WEIXIN\r\n\t\t\t\t\t\tcheckMobile: false, //检查手机号是否存在\r\n\t\t\t\t\t\t//#endif\r\n\t\t\t\t\t\topen_url: '/pages/user/invite'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: 'shangji1',\r\n\t\t\t\t\t\ttext: '申请渠道',\r\n\t\t\t\t\t\tcheckLogin: true,\r\n\t\t\t\t\t\t//#ifdef MP-WEIXIN\r\n\t\t\t\t\t\tcheckMobile: true, //检查手机号是否存在\r\n\t\t\t\t\t\t//#endif\r\n\t\t\t\t\t\topen_url: '/pages/user/channel?type=1'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: 'shoucang',\r\n\t\t\t\t\t\ttext: '我的收藏',\r\n\t\t\t\t\t\tcheckLogin: true,\r\n\t\t\t\t\t\topen_url: '/pages/user/favorite'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: 'liuyan',\r\n\t\t\t\t\t\ttext: '我的消息',\r\n\t\t\t\t\t\tcheckLogin: true,\r\n\t\t\t\t\t\topen_url: '/pages/index/chat'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: 'zuobiao',\r\n\t\t\t\t\t\ttext: '收货地址',\r\n\t\t\t\t\t\tcheckLogin: true,\r\n\t\t\t\t\t\topen_url: '/pages/address/list'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: 'tongji',\r\n\t\t\t\t\t\ttext: this.scoreName + '排行',\r\n\t\t\t\t\t\tcheckLogin: true,\r\n\t\t\t\t\t\topen_url: '/pages/user/score/ranking'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// {\r\n\t\t\t\t\t// \ttype: 'xinyongqia',\r\n\t\t\t\t\t// \ttext: '消费排行',\r\n\t\t\t\t\t// \tcheckLogin: true,\r\n\t\t\t\t\t// \topen_url: '/pages/product/favorite'\r\n\t\t\t\t\t// },\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: 'gonglve',\r\n\t\t\t\t\t\ttext: '余额明细',\r\n\t\t\t\t\t\tcheckLogin: true,\r\n\t\t\t\t\t\topen_url: '/pages/user/balances'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: 'liebiaoxingshi',\r\n\t\t\t\t\t\ttext: this.scoreName + '明细',\r\n\t\t\t\t\t\tcheckLogin: true,\r\n\t\t\t\t\t\topen_url: '/pages/user/scores'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: 'zhengli',\r\n\t\t\t\t\t\ttext: this.scoreName + '互转',\r\n\t\t\t\t\t\tcheckLogin: true,\r\n\t\t\t\t\t\topen_url: '/pages/user/score/transfer'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: 'tuikuan',\r\n\t\t\t\t\t\ttext: this.scoreName + '兑换',\r\n\t\t\t\t\t\tcheckLogin: true,\r\n\t\t\t\t\t\topen_url: '/pages/user/score/cashout'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: 'hongbao',\r\n\t\t\t\t\t\ttext: '余额提现',\r\n\t\t\t\t\t\tcheckLogin: true,\r\n\t\t\t\t\t\topen_url: '/pages/user/cashout'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: 'shezhi',\r\n\t\t\t\t\t\ttext: '个人设置',\r\n\t\t\t\t\t\tcheckLogin: true,\r\n\t\t\t\t\t\topen_url: '::navToUserInfo'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: 'kefu',\r\n\t\t\t\t\t\ttext: '联系客服',\r\n\t\t\t\t\t\topen_url: '/pages/app/contact'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t// {\r\n\t\t\t\t\t// \ttype: 'fankui',\r\n\t\t\t\t\t// \ttext: '意见反馈',\r\n\t\t\t\t\t// \topen_url: '/pages/app/feedback'\r\n\t\t\t\t\t// },\r\n\t\t\t\t\t// {\r\n\t\t\t\t\t// \ttype: 'bangzhuzhongxin',\r\n\t\t\t\t\t// \ttext: '关于我们', //<!-- 服务协议、隐私政策、资质证照 -->\r\n\t\t\t\t\t// \topen_url: '/pages/app/about'\r\n\t\t\t\t\t// }\r\n\t\t\t\t];\r\n\t\t\t\t//#ifndef MP\r\n\t\t\t\toptionDataList.push({\r\n\t\t\t\t\ttype: 'tuichu',\r\n\t\t\t\t\ttext: '账户管理',\r\n\t\t\t\t\tmustLogin: true,\r\n\t\t\t\t\topen_url: '/pages/user/account'\r\n\t\t\t\t});\r\n\t\t\t\t/* optionDataList.push({\r\n\t\t\t\t\ttype: 'tuichu',\r\n\t\t\t\t\ttext: '退出登录',\r\n\t\t\t\t\tmustLogin: true,\r\n\t\t\t\t\topen_url: '::logout'\r\n\t\t\t\t}); */\r\n\t\t\t\t//#endif\r\n\t\t\t\toptionDataList.unshift({\r\n\t\t\t\t\ttype: 'pengyou',\r\n\t\t\t\t\ttext: '我的团队',\r\n\t\t\t\t\tcheckLogin: true,\r\n\t\t\t\t\t//#ifdef MP-WEIXIN\r\n\t\t\t\t\tcheckMobile: false, //检查手机号是否存在\r\n\t\t\t\t\t//#endif\r\n\t\t\t\t\topen_url: '::checkTeam'\r\n\t\t\t\t});\r\n\t\t\t\toptionDataList.unshift({\r\n\t\t\t\t\ttype: 'dianpu',\r\n\t\t\t\t\ttext: '门店入驻',\r\n\t\t\t\t\tcheckLogin: true,\r\n\t\t\t\t\t//#ifdef MP-WEIXIN\r\n\t\t\t\t\tcheckMobile: true, //检查手机号是否存在\r\n\t\t\t\t\t//#endif\r\n\t\t\t\t\topen_url: '/pages/enterprise/apply'\r\n\t\t\t\t});\r\n\t\t\t\tif (this.userInfo && this.userInfo.role && this.userInfo.role.indexOf(\"admin\") != -1) {\r\n\t\t\t\t\toptionDataList.push({\r\n\t\t\t\t\t\ttype: 'danpin',\r\n\t\t\t\t\t\ttext: '系统管理',\r\n\t\t\t\t\t\tmustLogin: true,\r\n\t\t\t\t\t\topen_url: '/pages/admin/admin'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\toptionDataList.forEach((e, index) => {\r\n\t\t\t\t\tif (parseInt(index / colom) % 2 == 1) {\r\n\t\t\t\t\t\te.color = color;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\te.color = defColor;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis.optionDataList = optionDataList;\r\n\t\t\t},\r\n\t\t\tinitOrder() {\r\n\t\t\t\tlet colom = 5,\r\n\t\t\t\t\tdefColor = '#ec6535',\r\n\t\t\t\t\tcolor = '#51b2f9';\r\n\t\t\t\tlet optionDataList = [{\r\n\t\t\t\t\t\ttype: 'baoguofahuo-xianxing',\r\n\t\t\t\t\t\ttext: '待付款',\r\n\t\t\t\t\t\tcheckLogin: true,\r\n\t\t\t\t\t\tstate: 0,\r\n\t\t\t\t\t\topen_url: '/pages/order/order?type=unpay'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: 'baoguofahuo',\r\n\t\t\t\t\t\ttext: '待发货',\r\n\t\t\t\t\t\tcheckLogin: true,\r\n\t\t\t\t\t\tstate: 1,\r\n\t\t\t\t\t\topen_url: '/pages/order/order?type=undelivery'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: 'yunshuzhongwuliu',\r\n\t\t\t\t\t\ttext: '待收货',\r\n\t\t\t\t\t\tcheckLogin: true,\r\n\t\t\t\t\t\tstate: 2,\r\n\t\t\t\t\t\topen_url: '/pages/order/order?type=unreceived'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: 'liuyanfill',\r\n\t\t\t\t\t\ttext: '待评价',\r\n\t\t\t\t\t\tcheckLogin: true,\r\n\t\t\t\t\t\tstate: 3,\r\n\t\t\t\t\t\t// open_url: '/pages/order/order?type=finish'\r\n\t\t\t\t\t\topen_url: '/pages/order/comment'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: 'chaibaoguoqujian',\r\n\t\t\t\t\t\ttext: '退换货',\r\n\t\t\t\t\t\tcheckLogin: true,\r\n\t\t\t\t\t\tstate: \"refund\",\r\n\t\t\t\t\t\topen_url: '/pages/order/service'\r\n\t\t\t\t\t}\r\n\t\t\t\t];\r\n\t\t\t\toptionDataList.forEach((e, index) => {\r\n\t\t\t\t\tif (this.stateMap[e.state]) {\r\n\t\t\t\t\t\te.total = this.stateMap[e.state];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\te.total = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (parseInt(index / colom) % 2 == 1) {\r\n\t\t\t\t\t\te.color = color;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\te.color = defColor;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis.orderList = optionDataList;\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 微信绑定手机号，可能会与之前的账号合并\r\n\t\t\t * @param {Object} e\r\n\t\t\t */\r\n\t\t\tgetPhoneNumber(e) {\r\n\t\t\t\tconsole.log('getPhoneNumber', e);\r\n\t\t\t\tif (!e.detail.iv) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.$request('user/login/weixin_phone', {\r\n\t\t\t\t\t...e.detail,\r\n\t\t\t\t\tsessionKey: this.$store.state.user.sessionKey,\r\n\t\t\t\t\tuid: this.$store.state.user.userInfo._id,\r\n\t\t\t\t\topenid: this.$store.state.user.openid\r\n\t\t\t\t}, {\r\n\t\t\t\t\tloading: true\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\t//设置成功,刷新用户信息\r\n\t\t\t\t\tconsole.log(\"getPhoneNumber\", res)\r\n\t\t\t\t\t//刷新用户信息\r\n\t\t\t\t\tthis.getStatistics();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tnavToUserInfo() {\r\n\t\t\t\tthis.navTo(\r\n\t\t\t\t\t'/pages/user/info', {}, {\r\n\t\t\t\t\t\tlogin: true\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\teditData(data) {\r\n\t\t\t\tconsole.log('editData', data);\r\n\t\t\t\tthis.$request('user/info/edit', data, {\r\n\t\t\t\t\tloading: true\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\t//设置成功,刷新用户信息\r\n\t\t\t\t\tthis.$store.dispatch('user/getUserInfo');\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tchangeAccount() {\r\n\t\t\t\t//多个商户切换\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t.user-container {\r\n\t\tpadding-top: $uni-spacing-row-base;\r\n\r\n\t\t.header {\r\n\t\t\tbackground: #ec6535;\r\n\t\t\tmargin: 0 $uni-spacing-row-base;\r\n\r\n\t\t\t.header-panel {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t}\r\n\r\n\t\t\t.username {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.member {\r\n\t\t\t.name {\r\n\t\t\t\tfont-size: 18rpx;\r\n\t\t\t\tmargin-right: 12rpx;\r\n\t\t\t\tbackground: #000000;\r\n\t\t\t\tcolor: #ffffff;\r\n\t\t\t\tpadding: 0 18rpx;\r\n\t\t\t\tborder-radius: 50rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.options {\r\n\t\tflex-wrap: wrap;\r\n\r\n\t\t.opt-item {\r\n\t\t\twidth: 20%;\r\n\t\t\tmargin-bottom: 40rpx;\r\n\t\t\ttext-align: center;\r\n\t\t}\r\n\t}\r\n</style>\r\n","import mod from \"-!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1682514325499\n      var cssReload = require(\"G:/software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}