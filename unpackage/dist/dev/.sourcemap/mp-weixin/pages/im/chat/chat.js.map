{"version":3,"sources":["uni-app:///main.js","webpack:///H:/private/AIproject/psychic/assistant-client-front-end/pages/im/chat/chat.nvue?c996","webpack:///H:/private/AIproject/psychic/assistant-client-front-end/pages/im/chat/chat.nvue?618f","webpack:///H:/private/AIproject/psychic/assistant-client-front-end/pages/im/chat/chat.nvue?c88d","webpack:///H:/private/AIproject/psychic/assistant-client-front-end/pages/im/chat/chat.nvue?aff5","uni-app:///pages/im/chat/chat.nvue","webpack:///H:/private/AIproject/psychic/assistant-client-front-end/pages/im/chat/chat.nvue?9ab8","webpack:///H:/private/AIproject/psychic/assistant-client-front-end/pages/im/chat/chat.nvue?92e3","webpack:///H:/private/AIproject/psychic/assistant-client-front-end/pages/im/chat/chat.nvue?36d0","webpack:///H:/private/AIproject/psychic/assistant-client-front-end/pages/im/chat/chat.nvue?2ff6"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","conversation_id","textareaHeight","loadMoreIng","hasNews","isWidescreen","hasMore","systemInfo","safeAreaInsets","bottom","isCodeText","menuIsShow","emojiIsShow","soundIsShow","menuList","keyboardHeight","keyboardMaxHeight","emojiCodes","isFocus","msgListMoveX","computed","currentConversationId","conversation","unread_count","currentConversation","isSafariPc","msgList","msg","msgManagers","chatText","get","set","current_uid","imPlaceholderheight","mpIsFocus","watch","title","uni","created","height","mounted","onShow","group_id","group_member","complete","onUnload","getApp","beforeDestroy","onHide","onLoad","console","e","friend_uid","methods","load","icon","onChatInputFocus","changeSoundIsShow","changeMenuIsShow","changeEmojiIsShow","chooseAndUploadFile","uniCloud","type","count","sizeType","success","url","event","name","size","fail","hideKeyboard","input","ClearBr","key","sendSound","sound","beforeSendMsg","param","setTimeout","to_uid","client_create_time","from_uid","self","retriesSendMsg","mask","showLast","linechange","lineCount","showControl","index","msgContentDomInfo","isSelf","controlData","msgIndex","isInTop","top","left","right","width","clickMenu","clickEmojiItem","tapUnreadCount","getkey","getConversation","clearUnreadCount","getMsgManager","loadConversation","setCurrentConversationId","updateConversation","updateMsgManager","addMsgManager","onNavigationBarButtonTap"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,aAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACa;AACyB;;;AAG1F;AAC+K;AAC/K,gBAAgB,wLAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACxBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,kOAEN;AACP,KAAK;AACL;AACA,aAAa,gNAEN;AACP,KAAK;AACL;AACA,aAAa,gNAEN;AACP,KAAK;AACL;AACA,aAAa,4NAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxDA;AAAA;AAAA;AAAA;AAAipB,CAAgB,sqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;AC6GrqB;AAEA;AAOA;AACA;AACA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAbA;AAAA,eAeA;EACAC;IACA;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACA;MACAC;MACAC;MACA;MACAC;QACAC;UACAC;QACA;MACA;MACAC;MACAC;MACAC;MACAC;MACAC,WACA;QACA;QACA;MACA,GACA;QACA;QACA;MACA,GACA;QACA;QACA;MACA,EACA;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC,wDACA;IACAC;MAAA;IAAA;EACA,KACA;IACAC;IACA;IACAC;EACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;QACA;QACA;QACA;UACAC;QACA;QACA;MACA;MACA;IACA;IACA;IACA;IACAC;MACAC;QAAA;QACA;QACA;MACA;MACAC;QACA,yBACA,sBACA;UACAF;QACA,EACA;MACA;IACA;IACA;IACAG;MACA;IACA;IACAC;MAMA;MACA;QACAA;MACA;MACA;QACAA;MACA;MACA;IACA;IACAC;MAEA;IAEA;EAAA,EACA;EACAC;IACA;MACA;QACA;QACA;UACAC;QACA;QACAC;UACAD;QACA;MACA;IACA;EAiBA;EACAE;IAAA;IACA;IACA;;IAoBA;IACAD,2CAEA;MAAA,IADAE;MAEA;MACA;QACA;MACA;QACA;MACA;MACA;IACA;EAwHA;EACAC,6BA8BA;EACAC;IACA;MACA;MACA;MAEA;QAAAL;QAAAM;QAAAC;MACA;MACA;QACAP;MACA;MACA;MACAC;QACAD;QACAQ;UACA;QAAA;MAEA;IAEA;EACA;EACAC;IACA;IACA;IACA;IACA;IACA;IACAC;EACA;EACAC;IACA;IACA;IACA;IACA;IACAD;EACA;EACAE;IACA;IACAF;EACA;EACAG;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;cACAC;cAAA,MACA;gBAAA;gBAAA;cAAA;cACAC;cACA;cAAA,IACA;gBAAA;gBAAA;cAAA;cAAA;cAAA,OAEA;gBACAC;cACA;YAAA;cAAA;cAAA,OAIA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EACA;EACAC,uDACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBACA;gBACA;gBACA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OAEA;cAAA;gBAAA;kBAAA;kBAAA;gBAAA;gBAAA,kCACAjB;kBACAD;kBACAmB;gBACA;cAAA;gBAGAnB;gBACA;kBACAA;gBACA;gBACAC;kBACAD;gBACA;gBAEA;kBACA;gBACA;;gBAEA;gBACA;kBACA;gBACA;;gBAEA;gBACA;gBACA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAoB;MAAA;MACA;MACA;QACA;QACA;MACA;IACA;IACAC;MAAA;MACA;MACA;QACApB;MACA;QACA;MACA;MACAA;MACA;QACA;QACA;MACA;IACA;IACAqB;MAAA;MACA;QACA;QACArB;MACA;QACA;MACA;MACA;MACA;QACA;MACA;MACAc;IACA;IACAQ;MAAA;MACA;MAEA;QACA;QACAtB;MACA;QACA;MACA;MACA;MACA;QACA;MACA;MACAc;IACA;IACAS;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBACAC;kBACAC;kBACAC;kBACAC;kBACAC;oBACA;oBACAd;sBACA,IACAe,MAGAC,MAHAD;wBACAE,OAEAD,MAFAC;wBACAC,OACAF,MADAE;sBAEA;;sBAGAP;sBAEA;wBACAA;sBACA;sBACA;sBACA;sBACA9D;wBAAAkE;wBAAAG;wBAAAD;sBAAA;sBACA;oBACA;kBACA;kBACAE;oBACApB;oBACA;oBACA;oBACA;oBACA;kBACA;kBACAN;oBACAP;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAkC;MAAA;MACA;MACAlC;MACA;QACA;QACA;QACA;MACA;IACA;IACAmC;MAAA;MACA;MACA;QAAA,IAkBAC;UACAC;UACAA;UACA;QACA;QArBA;QACA;QACA;QACA;UACA;QACA;UACArC;YACAD;YACAmB;UACA;UACA;UACA;YACA;YACA;UACA;QACA;MAOA;IACA;IACAoB;MACA;MACA;QAAAC;MAAA;IACA;IACAC;MAAA;QAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAAC;gBACA9E;kBAAA8D;gBAAA,GACA;gBACA;kBACA;oBACA9D;oBACAA;kBACA;gBACA;gBACA;gBAAA,MACAA;kBAAA;kBAAA;gBAAA;gBACA;gBACAA;gBACA;gBAAA,IACAA;kBAAA;kBAAA;gBAAA;gBAAA,kCACAqC;kBACAD;kBACAmB;gBACA;cAAA;gBAEA;gBACAwB;kBACA;gBACA;;gBAEA;gBACA;kBACA/E;gBACA;cAAA;gBAGAA;kBACAgF;kBACA/E;kBACAyC;kBACAuC;kBACAC;kBACAC;gBACA;gBAGA;gBACAJ;kBACA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEAK;MACA/C;QACAgD;MACA;MACA;MACArF;MACA;QACAqC;MACA;IACA;IACAiD;MAAA;MACA;MACA;IACA;IACAC;MACA;MACA,gBAGApC;QAFAZ;QACAiD;MAEA;MACA;QACA;MACA;QACA;MACA;IACA;IACAC,yCAGA;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAFAC,qBACAC;gBAEAzC;gBACA0C;gBACAC;kBACAlE;kBACAmE;kBACAC;gBACA,GAEA;gBAEAC,MAMAL,kBANAK,KACAvF,SAKAkF,kBALAlF,QACAwF,OAIAN,kBAJAM,MACAC,QAGAP,kBAHAO,OACAC,QAEAR,kBAFAQ,OACA5D,SACAoD,kBADApD;gBAEAsD;gBACA;kBACAA;kBACAA;gBACA;kBACAA;kBACAA;gBACA;gBAWA;kBACAA;gBACA;kBACAA;gBACA;gBAEAA;gBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAO;MACA;MACA;QACA;MACA;MACA;QAOA;MACA;MACAjD;IACA;IACAkD;MACA;MACAlD;IACA;IACAmD;MACA;MACA;QACA;QACA;MAAA,CACA;QACAjE;MACA;IACA;IACAkE;MAEA;IAKA;EAAA,GACA;IACA;IACAC;IACAC;IACAC;IACAC;EACA,KACA;IACAC;IACAC;IACAC;IACAC;EACA,GACA;EACAC;IACA;MACA;QACA3E;UACA6B;QACA;MACA;QACA;QACA7B;UACA6B;QACA;QACA;QACA;QACA;QACA;MACA;IACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACp2BA;AAAA;AAAA;AAAA;AAAu7B,CAAgB,i7BAAG,EAAC,C;;;;;;;;;;;ACA38B;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAA4vC,CAAgB,ytCAAG,EAAC,C;;;;;;;;;;;ACAhxC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/im/chat/chat.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/im/chat/chat.nvue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./chat.nvue?vue&type=template&id=6019c341&scoped=true&\"\nvar renderjs\nimport script from \"./chat.nvue?vue&type=script&lang=js&\"\nexport * from \"./chat.nvue?vue&type=script&lang=js&\"\nimport style0 from \"./chat.nvue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./chat.nvue?vue&type=style&index=1&id=6019c341&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6019c341\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/im/chat/chat.nvue\"\nexport default component.exports","export * from \"-!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chat.nvue?vue&type=template&id=6019c341&scoped=true&\"","var components\ntry {\n  components = {\n    uniImMsgList: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-im-msg-list/uni-im-msg-list\" */ \"@/components/uni-im-msg-list/uni-im-msg-list.vue\"\n      )\n    },\n    uniImIcons: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-im-icons/uni-im-icons\" */ \"@/components/uni-im-icons/uni-im-icons.vue\"\n      )\n    },\n    uniImSound: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-im-sound/uni-im-sound\" */ \"@/components/uni-im-sound/uni-im-sound.vue\"\n      )\n    },\n    uniImControl: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-im-control/uni-im-control\" */ \"@/components/uni-im-control/uni-im-control.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.isCodeText = $event.detail.value\n    }\n    _vm.e1 = function ($event) {\n      _vm.isFocus = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chat.nvue?vue&type=script&lang=js&\"; export default mod; export * from \"-!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chat.nvue?vue&type=script&lang=js&\"","<style>\n  view,\n  label,\n  swiper-item,\n  scroll-view {\n    display:flex;\n    flex-direction:column;\n    flex-shrink: 0;\n    flex-grow: 0;\n    flex-basis: auto;\n    align-items: stretch;\n    align-content: flex-start;\n  }\n  view,\n  image,\n  input,\n  scroll-view,\n  swiper,\n  swiper-item,\n  text,\n  textarea,\n  video {\n    position: relative;\n    border: 0px solid #000000;\n    box-sizing: border-box;\n  }\n  swiper-item {\n    position: absolute;\n  }\n  button {\n    margin: 0;\n  }\n</style>\n<template>\r\n\t<view class=\"page\">\r\n\t\t<uni-im-msg-list ref=\"msg-list\" @showControl=\"showControl\" @retriesSendMsg=\"retriesSendMsg\" :paddingBottom=\"imPlaceholderheight + 'px'\" class=\"msg-list\" />\r\n\t\t\r\n\t\t<!-- 聊天数据输入框 -->\r\n\t\t<view class=\"chat-foot\" :style=\"{'padding-bottom':keyboardHeight?0:systemInfo.safeAreaInsets.bottom/2+'px'}\">\r\n\t\t\t<!-- pc宽屏（width>960px）的输入框 -->\r\n\t\t\t<view v-if=\"isWidescreen\" class=\"pc\">\r\n\t\t\t\t<view class=\"tool-bar\">\r\n\t\t\t\t\t<view class=\"icons\">\r\n\t\t\t\t\t\t<uni-im-icons v-for=\"(item,index) in menuList\" :key=\"index\" @click.native.stop=\"clickMenu(index,$event)\" :code=\"item.iconCode\" size=\"26\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<label class=\"code-model\" style=\"flex-direction: row;margin-left: 10px;\">\r\n\t\t\t\t\t\t<text>代码模式：</text>\r\n\t\t\t\t\t\t<switch style=\"transform: scale(0.8) translateX(-10px);\" @change=\"isCodeText = $event.detail.value\" />\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</view>\r\n\t\t\t\t<textarea :maxlength=\"isCodeText?-1:250\" v-model=\"chatText\" />\r\n\t\t\t</view>\r\n\t\t\t<!-- 非pc宽屏（width<960px）的输入框 -->\r\n\t\t\t<view v-else class=\"input-box\">\r\n\t\t\t\t<!-- 切换为语音模式 -->\r\n\t\t\t\t<uni-im-icons @click=\"changeSoundIsShow\" :code=\"soundIsShow?'e69f':'e684'\" size=\"30\" class=\"icon\" />\r\n\t\t\t\t<view class=\"input-box-conetnt\">\r\n\t\t\t\t\t<view class=\"textarea-box\">\r\n\t\t\t\t\t\t<textarea v-model=\"chatText\" @input=\"input\" @confirm=\"beforeSendMsg()\" @linechange=\"linechange\" :flex=\"true\"\r\n\t\t\t\t\t\t\t:style=\"{ height: textareaHeight + 'px' }\" :disable-default-padding=\"false\" :hold-keyboard=\"true\" :confirm-hold=\"true\"\r\n\t\t\t\t\t\t\t:auto-blur=\"false\" confirm-type=\"send\" :show-confirm-bar=\"false\" :cursor-spacing=\"20\" maxlength=\"250\"\r\n\t\t\t\t\t\t\t:focus=\"mpIsFocus\" @focus=\"onChatInputFocus()\" @blur=\"isFocus = false\" :fixed=\"true\"\r\n\t\t\t\t\t\t\t:adjust-position=\"false\" class=\"textarea\" ref=\"input-box\"/>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<uni-im-sound class=\"uni-im-sound\" v-if=\"soundIsShow\" @success=\"sendSound\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<uni-im-icons @click.native.stop=\"changeEmojiIsShow\" :code=\"emojiIsShow?'e69f':'e646'\" size=\"30\" class=\"icon\" />\r\n\t\t\t\t<text v-if=\"!soundIsShow&&chatText\" @click.prevent=\"beforeSendMsg()\" class=\"icon beforeSendMsg\">发送</text>\r\n\t\t\t\t<uni-im-icons v-else @click.native.stop=\"changeMenuIsShow\" code=\"e75a\" size=\"30\" class=\"icon\"></uni-im-icons>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view v-if=\"menuIsShow||emojiIsShow\" class=\"media-box\" :style=\"{height:keyboardMaxHeight+'px'}\">\r\n\t\t\t\t<view v-if=\"menuIsShow\" class=\"menu\"  :style=\"{height:keyboardMaxHeight+'px'}\">\r\n\t\t\t\t\t<view class=\"menu-item\" v-for=\"(item,index) in menuList\" :key=\"index\" @click.stop=\"clickMenu(index,$event)\">\r\n\t\t\t\t\t\t<view class=\"menu-item-icon\">\r\n\t\t\t\t\t\t\t<uni-im-icons :code=\"item.iconCode\" size=\"26\" />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<text class=\"menu-item-text\">{{item.title}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<scroll-view :scroll-y=\"true\" v-if=\"emojiIsShow\" class=\"emojiListBox\" :style=\"{height:keyboardMaxHeight+'px'}\">\r\n\t\t\t\t\t<text v-for=\"(uniCodeEmoji,index) in emojiCodes\" :key=\"index\" @click.stop=\"clickEmojiItem(uniCodeEmoji,$event)\" \r\n\t\t\t\t\tclass=\"emoji-item\">{{uniCodeEmoji}}</text>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</view>\r\n\t\t\t<view v-else :style=\"{height:keyboardHeight+'px'}\"></view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<uni-im-control ref=\"uni-im-control\"/>\r\n\t\t\r\n\t\t<!-- <uni-icons :style=\"{bottom:imPlaceholderheight + 10 + 'px'}\" v-if=\"hasNews\" class=\"hasNews\" @click=\"showLast(300)\" color=\"#FFF\" type=\"back\"></uni-icons> -->\r\n\t\t\r\n\t\t<!-- <view style=\"position: fixed;top: 200px;left: 0;background-color: #FFFFFF;\">\r\n\t\t\timPlaceholderheight:{{imPlaceholderheight}}\r\n\t\t\tkeyboardHeight:{{keyboardHeight}}\r\n\t\t\tkeyboardMaxHeight:{{keyboardMaxHeight}}\r\n\t\t\tmsgListMoveX:{{msgListMoveX}}\r\n\t\t\tsystemInfo.osName:{{systemInfo.osName}}\r\n\t\t</view> -->\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t// #ifdef APP-NVUE\r\n\t// 定义weex的dom模块（https://doc.weex.io/zh/docs/modules/dom.html#scrolltoelement）\r\n\tconst dom = weex.requireModule('dom') || {};\r\n\t// #endif\r\n\tlet oldScrollTop;\r\n\r\n\timport { store as uniIdStore } from '@/uni_modules/uni-id-pages/common/store';\r\n\r\n\timport {\r\n\t\tmapState,\r\n\t\tmapMutations,\r\n\t\tmapGetters,\r\n\t\tmapActions\r\n\t} from 'vuex';\r\n\r\n\timport MsgManager from '@/common/msgManager.js';\r\n\timport uniImUtils from '@/common/utils.js';\r\n\timport emojiCodes from '@/common/emojiCodes';\r\n\t\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t//当前会话对象id\r\n\t\t\t\tconversation_id: false,\r\n\t\t\t\t//聊天输入框高度\r\n\t\t\t\ttextareaHeight: 26,\r\n\t\t\t\t//正在加载更多聊天数据\r\n\t\t\t\tloadMoreIng: true,\r\n\t\t\t\t//收到正在对话的用户发来新消息，时悬浮按钮提示\r\n\t\t\t\thasNews: false,\r\n\t\t\t\t//是否为pc宽屏（width>960px）\r\n\t\t\t\tisWidescreen: false,\r\n\t\t\t\thasMore: true,\r\n\t\t\t\t//系统信息\r\n\t\t\t\tsystemInfo: {\r\n\t\t\t\t\tsafeAreaInsets:{\r\n\t\t\t\t\t\tbottom:0\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tisCodeText:false,\r\n\t\t\t\tmenuIsShow:false,\r\n\t\t\t\temojiIsShow:false,\r\n\t\t\t\tsoundIsShow:false,\r\n\t\t\t\tmenuList:[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"title\":\"图片\",\r\n\t\t\t\t\t\t\"iconCode\":\"e7be\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"title\":\"视频\",\r\n\t\t\t\t\t\t\"iconCode\":\"e690\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"title\":\"文件\",\r\n\t\t\t\t\t\t\"iconCode\":\"e69e\"\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tkeyboardHeight:0,\r\n\t\t\t\tkeyboardMaxHeight:260,\r\n\t\t\t\temojiCodes:emojiCodes,\r\n\t\t\t\tisFocus:false,\r\n\t\t\t\tmsgListMoveX:0\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState({\r\n\t\t\t\tcurrentConversationId: state => state.uniIm.currentConversationId\r\n\t\t\t}),\r\n\t\t\t...mapGetters({\r\n\t\t\t\tconversation: 'uniIm/conversation',\r\n\t\t\t\t//未读消息数量\r\n\t\t\t\tunread_count: 'uniIm/unread_count'\r\n\t\t\t}),\r\n\t\t\tcurrentConversation() {\r\n\t\t\t\tlet conversation_id = this.conversation_id //|| this.currentConversationId\r\n\t\t\t\t// console.log('this.currentConversationId',this.currentConversationId,this.conversation_id);\r\n\t\t\t\treturn this.conversation(conversation_id) || {};\r\n\t\t\t},\r\n\t\t\tisSafariPc() {\r\n\t\t\t\treturn this.systemInfo.browserName == 'safari' && this.isWidescreen\r\n\t\t\t},\r\n\t\t\tmsgList() {\r\n\t\t\t\treturn this.currentConversation.msgList || []\r\n\t\t\t},\r\n\t\t\tmsg() {\r\n\t\t\t\tlet conversation_id = this.conversation_id //|| this.currentConversationId\r\n\t\t\t\tif (conversation_id) {\r\n\t\t\t\t\tconst msgManagers = getApp().globalData.uniIm.msgManagers;\r\n\t\t\t\t\tlet msgManager = msgManagers[conversation_id];\r\n\t\t\t\t\tif (!msgManager) {\r\n\t\t\t\t\t\tmsgManagers[conversation_id] = new MsgManager(this.currentConversation);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn msgManagers[conversation_id];\r\n\t\t\t\t}\r\n\t\t\t\treturn {};\r\n\t\t\t},\r\n\t\t\t//聊天数据\r\n\t\t\t//当前会话的聊天框文字内容\r\n\t\t\tchatText: {\r\n\t\t\t\tget() {\r\n\t\t\t\t\t// console.log('this.currentConversation',this.currentConversation);\r\n\t\t\t\t\treturn this.currentConversation?.chatText;\r\n\t\t\t\t},\r\n\t\t\t\tset(chatText) {\r\n\t\t\t\t\tthis.updateConversation([\r\n\t\t\t\t\t\tthis.conversation_id,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tchatText\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//当前用户自己的uid\r\n\t\t\tcurrent_uid() {\r\n\t\t\t\treturn uniIdStore.userInfo._id;\r\n\t\t\t},\r\n\t\t\timPlaceholderheight(){\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tif(this.isWidescreen){\r\n\t\t\t\t\treturn 0\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t\tlet imPlaceholderheight = 32 + this.textareaHeight\r\n\t\t\t\tif(this.keyboardHeight || this.menuIsShow || this.emojiIsShow){\r\n\t\t\t\t\timPlaceholderheight += this.keyboardMaxHeight\r\n\t\t\t\t}\r\n\t\t\t\tif(! this.keyboardHeight){\r\n\t\t\t\t\timPlaceholderheight += this.systemInfo.safeAreaInsets.bottom/2\r\n\t\t\t\t}\r\n\t\t\t\treturn imPlaceholderheight\r\n\t\t\t},\r\n\t\t\tmpIsFocus(){\r\n\t\t\t\t// #ifdef MP\r\n\t\t\t\treturn this.isFocus\r\n\t\t\t\t// #endif\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\t\"currentConversation.group_member\"(data,oldData){\r\n\t\t\t\tif(oldData && data && Object.keys(data).length != Object.keys(oldData).length ){\r\n\t\t\t\t\tlet title = this.currentConversation.title\r\n\t\t\t\t\tif(this.currentConversation.group_id){\r\n\t\t\t\t\t\ttitle += \"（\"+Object.keys(this.currentConversation.group_member).length+\"人）\"\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\t\t\ttitle\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// #ifdef APP-NVUE\r\n\t\t\t// 设置原生标题栏按钮角标值 = 非当前正在聊的用户，发来的未读消息数量\r\n\t\t\tunread_count(unread_count) {\r\n\t\t\t\tplus.webview.currentWebview().setTitleNViewButtonStyle(0, {\r\n\t\t\t\t\ttext: unread_count == 0 ? '' : unread_count,\r\n\t\t\t\t\tbackground: '#E5E5E5'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tisFocus(state){\r\n\t\t\t\tif(state){\r\n\t\t\t\t\tthis.$refs['input-box'].focus()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$refs['input-box'].blur()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.systemInfo = uni.getSystemInfoSync()\r\n\t\t\t// console.log('this.systemInfo',this.systemInfo );\r\n\t\t\t// #ifdef H5\r\n\t\t\t// 判断是否为宽屏显示\r\n\t\t\tvar mediaQueryOb = uni.createMediaQueryObserver(this);\r\n\t\t\tmediaQueryOb.observe({ minWidth: 960 },\r\n\t\t\t\tmatches => {\r\n\t\t\t\t\tthis.isWidescreen = matches;\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\t// #endif\r\n\r\n\t\t\t// #ifdef H5\r\n\t\t\t//通过监听窗口变化 获取键盘弹出或收起事件\r\n\t\t\twindow.addEventListener('resize', () => {\r\n\t\t\t\tthis.showLast(0);\r\n\t\t\t\tthis.soundIsShow = false\r\n\t\t\t})\r\n\t\t\t// #endif\r\n\t\t\t\r\n\t\t\t// #ifndef H5\r\n\t\t\t// 监听键盘高度变化显示最后一条消息\r\n\t\t\tuni.onKeyboardHeightChange(({\r\n\t\t\t\theight\r\n\t\t\t}) => {\r\n\t\t\t\tthis.keyboardHeight = height\r\n\t\t\t\tif(height){\r\n\t\t\t\t\tthis.keyboardMaxHeight = height\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.msgListMoveX = 0\r\n\t\t\t\t}\r\n\t\t\t\tthis.showLast(0);\r\n\t\t\t});\r\n\t\t\t// #endif\r\n\r\n\r\n\t\t\t// #ifdef H5\r\n\t\t\t//上传图片并发送\r\n\t\t\tlet uploadAndSend = (blobUrl, type,{name,size}) => {\r\n\t\t\t\t// console.log('blobUrl',JSON.stringify(blobUrl),);\r\n\t\t\t\tuni.showLoading();\r\n\t\t\t\tuniCloud.uploadFile({\r\n\t\t\t\t\t\tfilePath: blobUrl,\r\n\t\t\t\t\t\tcloudPath: 'uni-im/' + this.currentConversationId + Date.now() + (type == 'image'?'.png':'')\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then( ({fileID:url}) => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlet data = {};\r\n\t\t\t\t\t\tif(!['image','video'].includes(type)){\r\n\t\t\t\t\t\t\ttype = 'file'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdata[type] = {url,size,name};\r\n\t\t\t\t\t\tthis.beforeSendMsg(data);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(e=>{\r\n\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t})\r\n\t\t\t};\r\n\r\n\t\t\t// 以下为实现拖拽或粘贴图片至聊天页面，直接发送的逻辑\r\n\t\t\t// 阻止默认事件\r\n\t\t\tdocument.addEventListener(\r\n\t\t\t\t'dragover',\r\n\t\t\t\tfunction(event) {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t},\r\n\t\t\t\tfalse\r\n\t\t\t);\r\n\r\n\t\t\t// 拖拽结束时触发\r\n\t\t\tdocument.addEventListener(\r\n\t\t\t\t'drop',\r\n\t\t\t\te => {\r\n\t\t\t\t\t//取消默认浏览器拖拽效果\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t//获取文件对象\r\n\t\t\t\t\tlet fileList = e.dataTransfer.files;\r\n\t\t\t\t\tif (fileList.length == 0) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet type = 'file'\r\n\t\t\t\t\tif (fileList[0].type.includes('video')) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: 'video',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\ttype = 'video'\r\n\t\t\t\t\t} else if (fileList[0].type.includes('image')) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: 'image',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\ttype = 'image'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet {name,size} = fileList[0]\r\n\t\t\t\t\t// console.log(78979798,fileList);\r\n\t\t\t\t\tlet blobUrl = window.URL.createObjectURL(fileList[0]);\r\n\t\t\t\t\tuploadAndSend(blobUrl,type,{name,size});\r\n\t\t\t\t},\r\n\t\t\t\tfalse\r\n\t\t\t);\r\n\r\n\t\t\t// 粘贴时触发\r\n\t\t\tdocument.addEventListener('paste', event => {\r\n\t\t\t\tif (event.clipboardData || event.originalEvent) {\r\n\t\t\t\t\t//某些chrome版本使用的是event.originalEvent\r\n\t\t\t\t\tlet clipboardData = event.clipboardData || event.originalEvent.clipboardData;\r\n\t\t\t\t\tlet text = clipboardData.getData('text');\r\n\t\t\t\t\tif (text) {\r\n\t\t\t\t\t\t// console.log(text);\r\n\t\t\t\t\t\tif (!this.isCodeText && text.length > 250) {\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\tcontent: '你粘贴的文本长度超过250，将被截断。',\r\n\t\t\t\t\t\t\t\tcomplete: e => {\r\n\t\t\t\t\t\t\t\t\tif (!e.confirm) {\r\n\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.chatText = '';\r\n\t\t\t\t\t\t\t\t\t\t}, 10);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (clipboardData.items) {\r\n\t\t\t\t\t\tlet items = clipboardData.items,\r\n\t\t\t\t\t\t\tlen = items.length,\r\n\t\t\t\t\t\t\tblob = null;\r\n\t\t\t\t\t\tfor (let i = 0; i < len; i++) {\r\n\t\t\t\t\t\t\t// console.log(items[i]);\r\n\t\t\t\t\t\t\tif (items[i].type.indexOf('image') !== -1) {\r\n\t\t\t\t\t\t\t\t//getAsFile() 此方法只是living standard firefox ie11 并不支持\r\n\t\t\t\t\t\t\t\tblob = items[i].getAsFile();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (blob !== null) {\r\n\t\t\t\t\t\t\tlet blobUrl = URL.createObjectURL(blob);\r\n\t\t\t\t\t\t\tlet name = \"来源截图工具数据\",size = 0\r\n\t\t\t\t\t\t\tuni.getFileInfo({\r\n\t\t\t\t\t\t\t\tfilePath:blobUrl,\r\n\t\t\t\t\t\t\t\tsuccess:e=>{\r\n\t\t\t\t\t\t\t\t\tsize = e.size\r\n\t\t\t\t\t\t\t\t\t// console.log(blobUrl,{name,size});\r\n\t\t\t\t\t\t\t\t\tuploadAndSend(blobUrl, 'image',{name,size});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t// #ifdef H5\r\n\t\t\t//实现（shift ctrl alt windows/mac） + enter 是换行输入而不是直接发送\r\n\t\t\t//定义adjunct建未被按下\r\n\t\t\tlet adjunctKeydown = false;\r\n\t\t\t//获得消息输入框对象\r\n\t\t\tconst inputBox = document.querySelector('.chat-foot .pc textarea');\r\n\t\t\tif (inputBox) {\r\n\t\t\t\t//键盘按下时\r\n\t\t\t\tinputBox.onkeydown = e => {\r\n\t\t\t\t\t// console.log('onkeydown', e.keyCode)\r\n\t\t\t\t\tif ([16, 17, 18, 93].includes(e.keyCode)) {\r\n\t\t\t\t\t\t//按下了shift ctrl alt windows键\r\n\t\t\t\t\t\tadjunctKeydown = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// console.log('onkeydown：', e,'adjunctKeydown：', adjunctKeydown);\r\n\t\t\t\t\t// 宽屏 且 按下了enter键 且没按下adjunct键 时直接发送消息\r\n\t\t\t\t\tif (this.isWidescreen && e.keyCode == 13 && !adjunctKeydown) {\r\n\t\t\t\t\t\tthis.beforeSendMsg();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tinputBox.onkeyup = e => {\r\n\t\t\t\t\t//松开adjunct键\r\n\t\t\t\t\tif ([16, 17, 18, 93].includes(e.keyCode)) {\r\n\t\t\t\t\t\tadjunctKeydown = false;\r\n\t\t\t\t\t\t// console.log('adjunctKeydown', adjunctKeydown);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tif (this.currentConversation.id) {\r\n\t\t\t\t// 窗口显示时（因为可能是有其他app切换进已打开的本窗口，所以是onshow而不只是onload）设置全局变量 正在聊天的用户的会话id\r\n\t\t\t\tthis.setCurrentConversationId(this.currentConversation.id);\r\n\t\t\t\t\r\n\t\t\t\tlet {title,group_id,group_member} = this.currentConversation\r\n\t\t\t\t// console.log('this.currentConversation',this.currentConversation);\r\n\t\t\t\tif(group_id){\r\n\t\t\t\t\ttitle += \"（\"+Object.keys(group_member).length+\"人）\"\r\n\t\t\t\t}\r\n\t\t\t\t// console.log('onShow:'+title);\r\n\t\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\t\ttitle,\r\n\t\t\t\t\tcomplete: (e) => {\r\n\t\t\t\t\t\t// console.log(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\t// console.log('onUnload');\r\n\t\t\t//页面销毁之前销毁 全局变量 正在聊天的用户的id\r\n\t\t\tthis.setCurrentConversationId(false);\r\n\t\t\t// console.log('beforeDestroy');\r\n\t\t\t// 关闭sound播放\r\n\t\t\tgetApp().globalData.uniIm.audioContext.stop()\r\n\t\t},\r\n\t\tbeforeDestroy() {\r\n\t\t\t//页面销毁之前销毁 全局变量 正在聊天的用户的id\r\n\t\t\tthis.setCurrentConversationId(false);\r\n\t\t\t// console.log('beforeDestroy');\r\n\t\t\t// 关闭sound播放\r\n\t\t\tgetApp().globalData.uniIm.audioContext.stop()\r\n\t\t},\r\n\t\tonHide() {\r\n\t\t\t// 关闭sound播放\r\n\t\t\tgetApp().globalData.uniIm.audioContext.stop()\r\n\t\t},\r\n\t\tasync onLoad(e) {\r\n\t\t\tconsole.log('onLoad', e, e.conversation_id,this.msgList.length);\r\n\t\t\tif (!e.conversation_id && e.user_id) {\r\n\t\t\t\te.conversation_id = uniImUtils.getConversationId(e.user_id)\r\n\t\t\t\t// console.log('has e.user_id',e.user_id,e.conversation_id);\r\n\t\t\t\tif(!this.conversation(e.conversation_id)){\r\n\t\t\t\t\t//创建会话\r\n\t\t\t\t\tawait this.getConversation({\r\n\t\t\t\t\t\tfriend_uid:e.user_id\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//调用load方法，因为pc宽屏时本页面是以组件形式展示。如$refs.chatView.loadconversation_id()执行\r\n\t\t\tawait this.load(e.conversation_id);\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapMutations(\"uniIm\", [\"setMsgList\"]),\r\n\t\t\tasync load(conversation_id) {\r\n\t\t\t\t//设置当前会话id\r\n\t\t\t\t//设置全局的app当前正在聊天的会话id\r\n\t\t\t\tthis.setCurrentConversationId(conversation_id);\r\n\t\t\t\tthis.conversation_id = conversation_id;\r\n\t\t\t\tif (!this.currentConversation.id) {\r\n\t\t\t\t\t//如果内存中取不到再从云端拉取，当用户直接访问或刷新本页面时需要\r\n\t\t\t\t\tif (!await this.loadConversation(conversation_id)) {\r\n\t\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\t\ttitle: '无效的conversation_id',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tlet title = this.currentConversation.title\r\n\t\t\t\tif(this.currentConversation.group_id){\r\n\t\t\t\t\ttitle += \"（\"+Object.keys(this.currentConversation.group_member).length+\"人）\"\r\n\t\t\t\t}\r\n\t\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\t\ttitle\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.$nextTick(()=>{\r\n\t\t\t\t\tthis.$refs['msg-list'].init()\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t//清除未读数\r\n\t\t\t\tif (this.currentConversation.unread_count) {\r\n\t\t\t\t\tthis.clearUnreadCount(this.conversation_id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//debug用模拟一次性自动发送100条数据\r\n\t\t\t\t// for (var i = 0; i < 20; i++) {\r\n\t\t\t\t// \tthis.chatText = '这是第'+i+'条消息'\r\n\t\t\t\t// \tthis.beforeSendMsg()\r\n\t\t\t\t// }*/\r\n\t\t\t},\r\n\t\t\tonChatInputFocus(){\r\n\t\t\t\tthis.isFocus = true;\r\n\t\t\t\tthis.$nextTick(()=>{\r\n\t\t\t\t\tthis.menuIsShow = false\r\n\t\t\t\t\tthis.emojiIsShow = false\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tchangeSoundIsShow() {\r\n\t\t\t\tthis.soundIsShow = !this.soundIsShow\r\n\t\t\t\tif(this.soundIsShow){\r\n\t\t\t\t\tuni.hideKeyboard();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.isFocus = true\r\n\t\t\t\t}\r\n\t\t\t\tuni.$emit('changeSoundIsShow');\r\n\t\t\t\tthis.$nextTick(()=>{\r\n\t\t\t\t\tthis.menuIsShow = false\r\n\t\t\t\t\tthis.emojiIsShow = false\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tchangeMenuIsShow(e){\r\n\t\t\t\tif(this.keyboardHeight){\r\n\t\t\t\t\tthis.menuIsShow = true\r\n\t\t\t\t\tuni.hideKeyboard()\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.menuIsShow = !this.menuIsShow\r\n\t\t\t\t}\r\n\t\t\t\tthis.emojiIsShow = false;\r\n\t\t\t\tthis.$nextTick(()=>{\r\n\t\t\t\t\tthis.showLast(0)\r\n\t\t\t\t})\r\n\t\t\t\te.stopPropagation()\r\n\t\t\t},\r\n\t\t\tchangeEmojiIsShow(e){\r\n\t\t\t\tthis.soundIsShow = false\r\n\t\t\t\t\r\n\t\t\t\tif(this.keyboardHeight){\r\n\t\t\t\t\tthis.emojiIsShow = true\r\n\t\t\t\t\tuni.hideKeyboard()\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.emojiIsShow = !this.emojiIsShow\r\n\t\t\t\t}\r\n\t\t\t\tthis.menuIsShow = false\r\n\t\t\t\tthis.$nextTick(()=>{\r\n\t\t\t\t\tthis.showLast(0)\r\n\t\t\t\t})\r\n\t\t\t\te.stopPropagation()\r\n\t\t\t},\r\n\t\t\tasync chooseAndUploadFile(type) {\r\n\t\t\t\tuniCloud.chooseAndUploadFile({\r\n\t\t\t\t\ttype,\r\n\t\t\t\t\tcount: 9,\r\n\t\t\t\t\tsizeType: ['compressed'],\r\n\t\t\t\t\tsuccess: e => {\r\n\t\t\t\t\t\t// console.log(e);\r\n\t\t\t\t\t\te.tempFiles.forEach(event => {\r\n\t\t\t\t\t\t\tlet {\r\n\t\t\t\t\t\t\t\turl,\r\n\t\t\t\t\t\t\t\tname,\r\n\t\t\t\t\t\t\t\tsize\r\n\t\t\t\t\t\t\t} = event;\r\n\t\t\t\t\t\t\t// console.log('event',event);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// #ifndef APP\r\n\t\t\t\t\t\t\ttype = event.type.split('/')[0];\r\n\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\tif(!['image','video'].includes(type)){\r\n\t\t\t\t\t\t\t\ttype = 'file'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// console.log('type===>', type);\r\n\t\t\t\t\t\t\tlet data = {};\r\n\t\t\t\t\t\t\tdata[type] = {url,size,name};\r\n\t\t\t\t\t\t\tthis.beforeSendMsg(data)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(e) {\r\n\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t\t// uni.showToast({\r\n\t\t\t\t\t\t// \ttitle: JSON.stringify(e),\r\n\t\t\t\t\t\t// \ticon: 'none'\r\n\t\t\t\t\t\t// });\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete() {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thideKeyboard() {\r\n\t\t\t\t// console.log('hideKeyboard');\r\n\t\t\t\tuni.hideKeyboard();\r\n\t\t\t\tthis.$nextTick(()=>{\r\n\t\t\t\t\tthis.menuIsShow = false\r\n\t\t\t\t\tthis.emojiIsShow = false\r\n\t\t\t\t\tthis.isFocus = false\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinput() {\r\n\t\t\t\t// 此事件仅非宽屏设备才会调用 非 Android端一旦输入换行符合直接发送消息\r\n\t\t\t\tif (this.systemInfo.platform != 'android' && this.chatText.indexOf('\\n') >= 0) {\r\n\t\t\t\t\t// console.log(\"有\\n\",this.chatText, this.chatText.length);\r\n\t\t\t\t\tthis.chatText = this.chatText.substring(0, this.chatText.length - 1);\r\n\t\t\t\t\t//检查去除换行符后是否为空\r\n\t\t\t\t\tif (ClearBr(this.chatText).length) {\r\n\t\t\t\t\t\tthis.beforeSendMsg();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '不能发送空消息',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.chatText = '';\r\n\t\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\t\tthis.chatText = '';\r\n\t\t\t\t\t\t\tthis.textareaHeight = 26;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction ClearBr(key) {\r\n\t\t\t\t\t\tkey = key.replace(/<\\/?.+?>/g, '');\r\n\t\t\t\t\t\tkey = key.replace(/[\\r\\n]/g, '');\r\n\t\t\t\t\t\treturn key;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsendSound(e){\r\n\t\t\t\t// console.log('sendSound',e);\r\n\t\t\t\tthis.beforeSendMsg({sound:e})\r\n\t\t\t},\r\n\t\t\tasync beforeSendMsg(param = {}) {\r\n\t\t\t\tlet data = { type: 'text' }\r\n\t\t\t\t// 根据传入的参数设置消息类型和内容\r\n\t\t\t\tfor (let key in param) {\r\n\t\t\t\t\tif(param[key]){\r\n\t\t\t\t\t\tdata.type = key\r\n\t\t\t\t\t\tdata.text = param[key]\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// 如果是文本类型需要做一些处理\r\n\t\t\t\tif(data.type == 'text'){\r\n\t\t\t\t\t//清除空格\r\n\t\t\t\t\tdata.text = this.chatText.trim();\r\n\t\t\t\t\t// 阻止发送空消息\r\n\t\t\t\t\tif(!data.text.length){\r\n\t\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\t\ttitle: '不能发送空消息',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 在下一个进程 清除输入框的文本内容\r\n\t\t\t\t\tsetTimeout(e => {\r\n\t\t\t\t\t\tthis.chatText = '';\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 当消息是否为 code类型开启时设置 -- 快速实现，临时方案 后续会优化\r\n\t\t\t\t\tif(this.isCodeText){\r\n\t\t\t\t\t\tdata.type = 'code';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tdata = Object.assign(data, {\r\n\t\t\t\t\tto_uid: this.currentConversation.friend_uid,\r\n\t\t\t\t\tconversation_id: this.currentConversation.id,\r\n\t\t\t\t\tgroup_id: this.currentConversation.group_id,\r\n\t\t\t\t\tclient_create_time: Date.now(),\r\n\t\t\t\t\tfrom_uid: this.current_uid,\r\n\t\t\t\t\tself: true,\r\n\t\t\t\t});\r\n\r\n\t\t\t\t\r\n\t\t\t\tthis.setMsgList(data)\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.textareaHeight = 26;\r\n\t\t\t\t}, 100);\r\n\t\t\t\tthis.showLast();\r\n\t\t\t},\r\n\t\t\r\n\t\t\tretriesSendMsg(data) {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\tmask: true\r\n\t\t\t\t});\r\n\t\t\t\t// console.log('retriesSendMsg', data);\r\n\t\t\t\tdata.isRetries = true\r\n\t\t\t\tthis.sendMsg(data, e => {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tshowLast(duration = 300) {\r\n\t\t\t\tthis.$refs['msg-list'].showLast(duration)\r\n\t\t\t\tthis.hasNews = false;\r\n\t\t\t},\r\n\t\t\tlinechange(e) {\r\n\t\t\t\t//console.log(e.detail);\r\n\t\t\t\tlet {\r\n\t\t\t\t\theight,\r\n\t\t\t\t\tlineCount\r\n\t\t\t\t} = e.detail;\r\n\t\t\t\t// console.log(height,lineCount);\r\n\t\t\t\tif (lineCount === 1) {\r\n\t\t\t\t\tthis.textareaHeight = 26;\r\n\t\t\t\t} else if (height <= 100) {\r\n\t\t\t\t\tthis.textareaHeight = height - 2;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync showControl({\r\n\t\t\t\tindex,\r\n\t\t\t\tmsgContentDomInfo\r\n\t\t\t}) {\r\n\t\t\t\tconsole.log('index', index, this.msgList, this.msgList[index]);\r\n\t\t\t\tlet isSelf = this.msgList[index].from_uid == this.current_uid\r\n\t\t\t\tlet controlData = {\r\n\t\t\t\t\tmsg: this.msgList[index],\r\n\t\t\t\t\tmsgIndex: index,\r\n\t\t\t\t\tisInTop: false\r\n\t\t\t\t};\r\n\r\n\t\t\t\t// console.log('msgContentDomInfo', JSON.stringify(msgContentDomInfo));\r\n\t\t\t\tlet {\r\n\t\t\t\t\ttop,\r\n\t\t\t\t\tbottom,\r\n\t\t\t\t\tleft,\r\n\t\t\t\t\tright,\r\n\t\t\t\t\twidth,\r\n\t\t\t\t\theight\r\n\t\t\t\t} = msgContentDomInfo\r\n\t\t\t\tcontrolData.width = width\r\n\t\t\t\tif (isSelf) {\r\n\t\t\t\t\tcontrolData.right = width / 3 + 'px'\r\n\t\t\t\t\tcontrolData.left = ''\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontrolData.left = width / 3 + 'px'\r\n\t\t\t\t\tcontrolData.right = ''\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tif (top < 60) {\r\n\t\t\t\t\tcontrolData.top = bottom + 55 + 'px'\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontrolData.top = top - 20 + 'px'\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\tif (top < 60) {\r\n\t\t\t\t\tcontrolData.top = bottom + 8 + 'px'\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontrolData.top = top - 65 + 'px'\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t\tcontrolData.isInTop = top > 60\r\n\t\t\t\tthis.$refs['uni-im-control'].show(controlData)\r\n\t\t\t\t// console.log(index);\r\n\t\t\t},\r\n\t\t\tclickMenu(index,e){\r\n\t\t\t\t// console.log('clickMenu-',index);\r\n\t\t\t\tif(index<2){\r\n\t\t\t\t\tthis.chooseAndUploadFile(index === 0 ? 'image' : 'video')\r\n\t\t\t\t}\r\n\t\t\t\tif(index === 2) {\r\n\t\t\t\t\t// #ifdef APP-NVUE\r\n\t\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\t\ttitle: '暂不支持，发送文件',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\tthis.chooseAndUploadFile('all')\r\n\t\t\t\t}\r\n\t\t\t\te.stopPropagation()\r\n\t\t\t},\r\n\t\t\tclickEmojiItem(emojiUniCode,e){\r\n\t\t\t\tthis.chatText += emojiUniCode\r\n\t\t\t\te.stopPropagation()\r\n\t\t\t},\r\n\t\t\ttapUnreadCount() {\r\n\t\t\t\t//点击未读消息文字按钮事件\r\n\t\t\t\tif (this.isWidescreen) {\r\n\t\t\t\t\t// this.$emit('tapUnreadCount') //点击后会话列表自动滚动 置顶 待读项\r\n\t\t\t\t\t// console.log('tapUnreadCount');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.navigateBack();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetkey(id,index){\r\n\t\t\t\t// #ifndef APP\r\n\t\t\t\treturn index\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP-NVUE\r\n\t\t\t\treturn id\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\t...mapActions({\r\n\t\t\t\t// 加载更多会话数据\r\n\t\t\t\tgetConversation: 'uniIm/getConversation',\r\n\t\t\t\tclearUnreadCount: 'uniIm/clearUnreadCount',\r\n\t\t\t\tgetMsgManager: 'uniIm/getMsgManager',\r\n\t\t\t\tloadConversation: 'uniIm/loadMoreConversation',\r\n\t\t\t}),\r\n\t\t\t...mapMutations({\r\n\t\t\t\tsetCurrentConversationId: 'uniIm/setCurrentConversationId',\r\n\t\t\t\tupdateConversation: 'uniIm/updateConversation',\r\n\t\t\t\tupdateMsgManager: 'uniIm/updateMsgManager',\r\n\t\t\t\taddMsgManager: 'uniIm/addMsgManager'\r\n\t\t\t})\r\n\t\t},\r\n\t\tonNavigationBarButtonTap(e) {\r\n\t\t\tif(e.index === 0){\r\n\t\t\t\tif(this.currentConversation.group_id){\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl:\"/pages/uni-im/group/info?conversation_id=\" + this.currentConversation.id\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// console.log(this.currentConversation,6565);\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl:\"/pages/uni-im/chat/info?user_id=\" + this.currentConversation.friend_uid\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// uni.showToast({\r\n\t\t\t\t\t// \ttitle: '仅群里可见，详细信息',\r\n\t\t\t\t\t// \ticon: 'none'\r\n\t\t\t\t\t// });\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// uni.navigateBack();\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t/* #ifndef APP-NVUE */\r\n\tview {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\tpage {\r\n\t\toverflow-anchor: auto;\r\n\t\tbackground-color: #efefef;\r\n\t}\r\n\t/* #endif */\r\n\t\r\n\t.page{\r\n\t\tflex: 1;\r\n\t\tbackground-color: #efefef;\r\n\t\t// border: solid 5px #2faf4c;\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\theight: calc(100vh - 45px);\r\n\t\t/* #endif */\r\n\t}\r\n\t\r\n\t.chat-foot {\r\n\t\tflex-direction: column;\r\n\t\tborder-top: 1rpx solid #BBBBBB ;\r\n\t\tbackground-color: #F7F7F7;\r\n\t\twidth: 750rpx;\r\n\t\t\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\t\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\tz-index: 999;\r\n\t\t// overflow: hidden;\r\n\t\t/* #endif */\r\n\t}\r\n\r\n\t/* #ifdef H5 */\r\n\t@media screen and (min-width: 960px) {\r\n\t\t// .msg-list {\r\n\t\t// \tmargin-bottom: 0;\r\n\t\t// \tbackground-color: #f8f8f8 !important;\r\n\t\t// }\r\n\t\t// //防止pc端滚动条挡住头像\r\n\t\t// .msg-list ::v-deep .msg-box{\r\n\t\t// \tpadding: 30px;\r\n\t\t// }\r\n\r\n\t\t.chat-foot {\r\n\t\t\tborder: none;\r\n\t\t\tpadding: 0;\r\n\t\t\tjustify-content: start;\r\n\t\t}\r\n\t}\r\n\r\n\t/* #endif */\r\n\r\n\t/* #ifndef APP-NVUE */\r\n\t.chat-foot * {\r\n\t\t//\tborder: solid 1px red;\r\n\t}\r\n\t/* #endif */\r\n\t.textarea-box{\r\n\t\tbackground-color: #ffffff;\r\n\t\tpadding: 10px;\r\n\t\twidth: 450rpx;\r\n\t\tborder-radius: 10px;\r\n\t}\r\n\t.textarea {\r\n\t\twidth: 400rpx;\r\n\t\tpadding: 0;\r\n\t\tbackground-color: #ffffff;\r\n\t\tcolor: #666666;\r\n\t\t//padding: 20rpx;\r\n\t\tfont-size: 32rpx;\r\n\t}\r\n\r\n\t.tip-view {\r\n\t\tposition: fixed;\r\n\t\ttop: 100px;\r\n\t\twidth: 750rpx;\r\n\t\talign-items: center;\r\n\t\tcolor: #999999;\r\n\t}\r\n\t\r\n\t.tip-null-msg{\r\n\t\tcolor: #999999;\r\n\t\tfont-size: 14px;\r\n\t}\r\n\r\n\t.beforeSendMsg {\r\n\t\tcolor: #ffffff;\r\n\t\tfont-size: 24rpx;\r\n\t\tborder-radius: 6px;\r\n\t\tbackground-color: #2faf4c;\r\n\t\t// width: 80rpx;\r\n\t\theight: 28px;\r\n\t\tline-height: 28px;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.icon {\r\n\t\twidth: 70rpx;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.loadMore {\r\n\t\tline-height: 80rpx;\r\n\t\theight: 80rpx;\r\n\t\ttext-align: center;\r\n\t\twidth: 750rpx;\r\n\t\tcolor: #adb3b7;\r\n\t\tfont-size: 12px;\r\n\t}\r\n\r\n\t.hasNews {\r\n\t\tposition: fixed;\r\n\t\tright: 20px;\r\n\t\tbackground-color: #4CD964;\r\n\t\tborder-radius: 100px;\r\n\t\twidth: 20px;\r\n\t\theight: 20px;\r\n\t\tline-height: 20px;\r\n\t\ttext-align: center;\r\n\t\ttransform: rotate(270deg);\r\n\t}\r\n\r\n\t/* #ifndef APP-NVUE */\r\n\t.unread_count {\r\n\t\tposition: fixed;\r\n\t\ttop: 10px;\r\n\t\tleft: 70rpx;\r\n\t\tz-index: 9999;\r\n\t\tbackground-color: #dfe2e9;\r\n\t\tpadding: 0 14rpx;\r\n\t\theight: 14px;\r\n\t\tline-height: 14px;\r\n\t\tborder-radius: 9px;\r\n\t\tcolor: #0c1013;\r\n\t\tfont-size: 12px;\r\n\t\tmargin-top: 3px;\r\n\t}\r\n\t/* #endif */\r\n\r\n\t/* #ifdef H5 */\r\n\t.chat-foot .pc,\r\n\t.chat-foot .pc textarea {\r\n\t\tflex-direction: column;\r\n\t\tpadding: 6px 20rpx;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tbackground-color: #f7f7f7;\r\n\t\twidth: 660px;\r\n\t\tpadding-left: 10px;\r\n\t\theight: 170px;\r\n\t\tposition: relative;\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t}\r\n\t.chat-foot .pc textarea {\r\n\t\tpadding-top: 20px;\r\n\t}\r\n\r\n\t.chat-foot .pc {\r\n\t\tborder-top: solid 1px #dededd;\r\n\t\tpadding-top: 30px;\r\n\t\theight: 200px;\r\n\t}\r\n\r\n\t.chat-foot .pc .tool-bar {\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\ttop: 0;\r\n\t\tz-index: 999;\r\n\t\tpadding: 5px 16px;\r\n\t\tflex-direction: row;\r\n\t}\r\n\t\r\n\t.chat-foot .pc .tool-bar .icons{\r\n\t\tflex-direction: row;\r\n\t}\r\n\t\r\n\t.chat-foot .pc .tool-bar .code-model{\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\t\r\n\t}\r\n\t\r\n\t.chat-foot .pc .tool-bar .icons ::v-deep .uni-im-icons {\r\n\t\tcursor: pointer;\r\n\t\tmargin: 10px;\r\n\t}\r\n\r\n\t/* #endif */\r\n\t.input-box {\r\n\t\tflex-direction: row;\r\n\t\tpadding: 10rpx 18rpx;\r\n\t\tjustify-content: space-around;\r\n\t\talign-items: center;\r\n\t}\r\n\t.menu{\r\n\t\tpadding: 36rpx;\r\n\t\twidth: 750rpx;\r\n\t\tborder-top: solid 1px #ededed;\r\n\t\tflex-direction: row;\r\n\t\tflex-wrap: wrap;\r\n\t}\r\n\t.menu-item,.menu-item-icon{\r\n\t\twidth: 160rpx;\r\n\t\theight: 160rpx;\r\n\t\tjustify-content: space-around;\r\n\t\talign-items: center;\r\n\t}\r\n\t.menu-item-icon{\r\n\t\twidth: 80rpx;\r\n\t\theight: 80rpx;\r\n\t\tbackground-color: #ffffff;\r\n\t\tcolor: #6F6F6F;\r\n\t\tborder-radius: 10px;\r\n\t}\r\n\t.menu-item-text{\r\n\t\tfont-size: 12px;\r\n\t}\r\n\t.emojiListBox{\r\n\t\twidth: 750rpx;\r\n\t\tpadding: 27rpx;\r\n\t\tflex-direction: row;\r\n\t\tflex-wrap: wrap;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\t.emoji-item{\r\n\t\ttext-align: center;\r\n\t\tfont-size: 65rpx;\r\n\t\twidth: 87rpx;\r\n\t\theight: 87rpx;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\tdisplay: inline-block;\r\n\t\t/* #endif */\r\n\t}\r\n\t.uni-im-sound{\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tz-index: 999;\r\n\t}\r\n\t.system-msg-box{\r\n\t\twidth: 750rpx;\r\n\t\tmargin-bottom: 10px;\r\n\t\talign-items: center;\r\n\t}\r\n\t.system-msg{\r\n\t\tbackground-color: #f2f2f2;\r\n\t\tcolor: #9d9e9d;\r\n\t\tfont-size: 14px;\r\n\t\theight: 30px;\r\n\t\tline-height: 30px;\r\n\t\tpadding:0 15rpx;\r\n\t\tborder-radius: 8px;\r\n\t}\r\n</style>\r\n","import mod from \"-!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chat.nvue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chat.nvue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1682514305136\n      var cssReload = require(\"G:/software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chat.nvue?vue&type=style&index=1&id=6019c341&lang=scss&scoped=true&\"; export default mod; export * from \"-!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!G:\\\\software\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chat.nvue?vue&type=style&index=1&id=6019c341&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1682514328375\n      var cssReload = require(\"G:/software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}