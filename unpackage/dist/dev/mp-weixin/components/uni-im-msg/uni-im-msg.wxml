<view class="{{['msg-box',(self)?'reverse':'']}}"><cloud-image class="avatarUrl" vue-id="52508e3c-1" width="80rpx" height="80rpx" borderRadius="5px" src="{{avatarUrl||'/uni-im/static/avatarUrl.png'}}" mode="widthFix" bind:__l="__l"></cloud-image><view><block wx:if="{{!self}}"><text class="username" selectable="{{true}}">{{userInfo.nickname}}</text></block><view data-ref="msg-content" data-event-opts="{{[['longpress',[['showControl',['$event']]]]]}}" class="msg-content vue-ref" bindlongpress="__e"><block wx:if="{{self}}"><uni-icons class="msgStateIcon" vue-id="52508e3c-2" color="{{msg.state===0?'#999':'#d22'}}" type="{{msgStateIcon}}" data-event-opts="{{[['^click',[['retriesSendMsg']]]]}}" bind:click="__e" bind:__l="__l"></uni-icons></block><block wx:if="{{msg.type=='image'}}"><cloud-image vue-id="52508e3c-3" width="200rpx" height="200rpx" src="{{msg.text.url||msg.text}}" mode="aspectFill" data-event-opts="{{[['^click',[['previewImage',[msg.text.url||msg.text]]]]]}}" bind:click="__e" bind:__l="__l"></cloud-image></block><block wx:if="{{msg.type=='sound'}}"><view data-event-opts="{{[['tap',[['playSound',['$0'],['msg.text.url']]]]]}}" class="{{['text','selfText','sound-box',(!self)?'reverse':'']}}" style="{{'width:'+(soundBoxWidth)+';'}}" bindtap="__e"><text class="sound-time">{{msg.text.time+"''"}}</text><view class="{{['sound-icon-box',(!self)?'rotate':'']}}" style="width:18px;height:18px;"><block wx:if="{{soundPlayState}}"><image style="width:18px;height:18px;" src="/static/sound-ing.gif" mode="widthFix"></image></block><block wx:else><uni-im-icons class="{{[(soundPlayState)?'sound-icon-active':'']}}" vue-id="52508e3c-4" code="e6f5" size="18px" color="#000000" bind:__l="__l"></uni-im-icons></block></view></view></block><block wx:if="{{msg.type=='text'}}"><view class="{{['text-box',msgClass]}}"><block wx:if="{{msg.text==htmlString}}"><text class="msg-text">{{msg.text}}</text></block><block wx:else><block wx:for="{{nodes}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block wx:if="{{item.type=='text'}}"><text class="msg-text">{{item.text}}</text></block><block wx:if="{{item.name=='a'}}"><text data-event-opts="{{[['tap',[['clickLink',['$0'],[[['nodes','',index,'attrs.href']]]]]]]}}" class="link msg-text" bindtap="__e">{{item.attrs.href}}</text></block></block></block></view></block><block wx:if="{{msg.type=='code'}}">默认不启用代码浏览模块，如有需要请关闭注释</block><block wx:if="{{msg.type=='video'}}"><view data-event-opts="{{[['tap',[['playVideo',['$event']]]]]}}" class="video-box" bindtap="__e"><image class="video-img" mode="aspectFill" src="{{videoUrl+'?x-oss-process=video/snapshot,t_1000,f_jpg,w_200,m_fast'}}"></image><view class="video-box-mark"></view><uni-im-icons class="play-video-icon" vue-id="52508e3c-5" code="e650" size="35" color="#FFF" bind:__l="__l"></uni-im-icons></view></block><block wx:if="{{msg.type=='file'}}"><view data-event-opts="{{[['tap',[['downLoadFile',['$event']]]]]}}" class="file-msg-box" bindtap="__e"><view class="file-msg-info"><text class="file-msg-info-name">{{fileName}}</text><text class="file-msg-info-size">{{fileSize}}</text></view><uni-im-icons class="file-icon" vue-id="52508e3c-6" code="e858" size="50" color="#EEEEEE" bind:__l="__l"></uni-im-icons></view></block></view></view></view>